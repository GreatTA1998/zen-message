var Oe=Object.defineProperty;var me=Object.getOwnPropertySymbols;var je=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable;var _e=(o,e,t)=>e in o?Oe(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,ge=(o,e)=>{for(var t in e||(e={}))je.call(e,t)&&_e(o,t,e[t]);if(me)for(var t of me(e))He.call(e,t)&&_e(o,t,e[t]);return o};import{L as Le,M as Fe,S as Pe,i as Re,s as de,l as G,g as V,e as b,k as C,c as y,a as N,m as P,d as p,f as c,b as k,J as d,K as X,N as fe,t as R,h as S,O as ae,P as L,Q as q,R as ce,T as qe,U as Ye,v as Ke,V as Se,W as Z,X as te,Y as Je,E as Ze,Z as he,_ as We,$ as ve,j as x,o as le,p as Ae,q as ie,a0 as re,a1 as Ge,a2 as Qe,a3 as Xe,n as Be,a4 as xe,a5 as $e,a6 as be,w as et,x as tt,y as lt,B as it}from"../chunks/vendor-5e8b3037.js";const nt={apiKey:"AIzaSyCMj9SsNMKDI9EezOzg_jowsYUOfaCbivc",authDomain:"project-z-e00fd.firebaseapp.com",projectId:"project-z-e00fd",storageBucket:"project-z-e00fd.appspot.com",messagingSenderId:"37588438028",appId:"1:37588438028:web:82c870a2fe6af985d67229",measurementId:"G-W20KMPGM93"};Le(nt);var K=Fe();const ue=function(o,e={month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"utc"}){const t=new Date(o);let s=t.getTimezoneOffset()*6e4;return new Date(t-s).toLocaleDateString("en-US",e)};function ye(o,e,t){const s=o.slice();return s[18]=e[t],s}function we(o,e,t){const s=o.slice();return s[21]=e[t],s[23]=t,s}function ke(o){let e,t=o[5].messages,s=[];for(let l=0;l<t.length;l+=1)s[l]=De(we(o,t,l));return{c(){for(let l=0;l<s.length;l+=1)s[l].c();e=G()},l(l){for(let i=0;i<s.length;i+=1)s[i].l(l);e=G()},m(l,i){for(let n=0;n<s.length;n+=1)s[n].m(l,i);V(l,e,i)},p(l,i){if(i&41){t=l[5].messages;let n;for(n=0;n<t.length;n+=1){const u=we(l,t,n);s[n]?s[n].p(u,i):(s[n]=De(u),s[n].c(),s[n].m(e.parentNode,e))}for(;n<s.length;n+=1)s[n].d(1);s.length=t.length}},d(l){fe(s,l),l&&p(e)}}}function st(o){let e,t=o[21].content+"",s,l,i,n=" "+ue(o[21].timestamp),u;return{c(){e=b("p"),s=R(t),l=C(),i=b("p"),u=R(n),this.h()},l(r){e=y(r,"P",{style:!0,class:!0});var a=N(e);s=S(a,t),a.forEach(p),l=P(r),i=y(r,"P",{style:!0,class:!0});var f=N(i);u=S(f,n),f.forEach(p),this.h()},h(){c(e,"margin-right","4px"),c(e,"margin-left","0"),c(e,"margin-bottom","4px"),k(e,"class","svelte-l9tbzz"),c(i,"font-size","0.8rem"),c(i,"color","grey"),c(i,"margin-left","0"),c(i,"margin-right","auto"),c(i,"margin-top","18px"),k(i,"class","svelte-l9tbzz")},m(r,a){V(r,e,a),d(e,s),V(r,l,a),V(r,i,a),d(i,u)},p(r,a){a&32&&t!==(t=r[21].content+"")&&x(s,t),a&32&&n!==(n=" "+ue(r[21].timestamp))&&x(u,n)},d(r){r&&p(e),r&&p(l),r&&p(i)}}}function ot(o){let e,t=o[21].content+"",s,l,i,n=" "+ue(o[21].timestamp),u;return{c(){e=b("p"),s=R(t),l=C(),i=b("p"),u=R(n),this.h()},l(r){e=y(r,"P",{style:!0,class:!0});var a=N(e);s=S(a,t),a.forEach(p),l=P(r),i=y(r,"P",{style:!0,class:!0});var f=N(i);u=S(f,n),f.forEach(p),this.h()},h(){c(e,"margin-left","auto"),c(e,"margin-right","0"),c(e,"margin-bottom","4px"),k(e,"class","svelte-l9tbzz"),c(i,"font-size","0.7rem"),c(i,"color","grey"),c(i,"margin-left","4px"),c(i,"margin-bottom","0px"),c(i,"margin-top","18px"),k(i,"class","svelte-l9tbzz")},m(r,a){V(r,e,a),d(e,s),V(r,l,a),V(r,i,a),d(i,u)},p(r,a){a&32&&t!==(t=r[21].content+"")&&x(s,t),a&32&&n!==(n=" "+ue(r[21].timestamp))&&x(u,n)},d(r){r&&p(e),r&&p(l),r&&p(i)}}}function Ie(o){let e;return{c(){e=b("div"),this.h()},l(t){e=y(t,"DIV",{class:!0}),N(e).forEach(p),this.h()},h(){k(e,"class","svelte-l9tbzz")},m(t,s){V(t,e,s),o[10](e)},p:X,d(t){t&&p(e),o[10](null)}}}function De(o){let e,t,s;function l(r,a){return r[21].authorUID===r[0].uid?ot:st}let i=l(o),n=i(o),u=o[23]===o[5].messages.length-1&&Ie(o);return{c(){e=b("div"),n.c(),t=C(),u&&u.c(),s=C(),this.h()},l(r){e=y(r,"DIV",{style:!0,class:!0});var a=N(e);n.l(a),t=P(a),u&&u.l(a),s=P(a),a.forEach(p),this.h()},h(){c(e,"display","flex"),c(e,"width","280px"),c(e,"margin-right","20px"),k(e,"class","svelte-l9tbzz")},m(r,a){V(r,e,a),n.m(e,null),d(e,t),u&&u.m(e,null),d(e,s)},p(r,a){i===(i=l(r))&&n?n.p(r,a):(n.d(1),n=i(r),n&&(n.c(),n.m(e,t))),r[23]===r[5].messages.length-1?u?u.p(r,a):(u=Ie(r),u.c(),u.m(e,s)):u&&(u.d(1),u=null)},d(r){r&&p(e),n.d(),u&&u.d()}}}function Ee(o){let e,t=o[18]+"",s,l,i,n;function u(){return o[13](o[18])}return{c(){e=b("div"),s=R(t),l=C(),this.h()},l(r){e=y(r,"DIV",{class:!0,style:!0});var a=N(e);s=S(a,t),l=P(a),a.forEach(p),this.h()},h(){k(e,"class","clickable-option svelte-l9tbzz"),c(e,"margin-left","4px"),ae(e,"highlighted-box",o[1]===o[18])},m(r,a){V(r,e,a),d(e,s),d(e,l),i||(n=L(e,"click",u),i=!0)},p(r,a){o=r,a&66&&ae(e,"highlighted-box",o[1]===o[18])},d(r){r&&p(e),i=!1,n()}}}function rt(o){let e,t,s,l,i,n,u,r,a,f,_,z,W,U,w=o[5].messages&&ke(o),I=o[6],T=[];for(let m=0;m<I.length;m+=1)T[m]=Ee(ye(o,I,m));return{c(){e=b("div"),t=b("div"),w&&w.c(),s=C(),l=b("input"),i=C(),n=b("div"),u=b("div"),r=R("Want reply:"),a=C();for(let m=0;m<T.length;m+=1)T[m].c();f=C(),_=b("button"),z=R("Send message"),this.h()},l(m){e=y(m,"DIV",{style:!0,class:!0});var h=N(e);t=y(h,"DIV",{style:!0,class:!0});var v=N(t);w&&w.l(v),v.forEach(p),s=P(h),l=y(h,"INPUT",{style:!0,placeholder:!0,class:!0}),i=P(h),n=y(h,"DIV",{style:!0,class:!0});var g=N(n);u=y(g,"DIV",{style:!0,class:!0});var M=N(u);r=S(M,"Want reply:"),M.forEach(p),a=P(g);for(let j=0;j<T.length;j+=1)T[j].l(g);g.forEach(p),f=P(h),_=y(h,"BUTTON",{style:!0,class:!0});var D=N(_);z=S(D,"Send message"),D.forEach(p),h.forEach(p),this.h()},h(){c(t,"height","200px"),c(t,"overflow-y","auto"),c(t,"overflow-x","hidden"),k(t,"class","svelte-l9tbzz"),c(l,"width","300px"),c(l,"box-sizing","border-box"),k(l,"placeholder","Type message here..."),k(l,"class","svelte-l9tbzz"),c(u,"color","grey"),k(u,"class","svelte-l9tbzz"),c(n,"display","flex"),c(n,"margin-top","5px"),c(n,"align-items","center"),c(n,"flex-wrap","nowrap"),k(n,"class","svelte-l9tbzz"),c(_,"margin-top","12px"),c(_,"height","30px"),c(_,"width","300px"),k(_,"class","svelte-l9tbzz"),c(e,"width","300px"),k(e,"class","svelte-l9tbzz")},m(m,h){V(m,e,h),d(e,t),w&&w.m(t,null),d(e,s),d(e,l),q(l,o[4]),o[12](l),d(e,i),d(e,n),d(n,u),d(u,r),d(n,a);for(let v=0;v<T.length;v+=1)T[v].m(n,null);d(e,f),d(e,_),d(_,z),W||(U=[L(l,"input",o[11]),L(_,"click",o[7])],W=!0)},p(m,[h]){if(m[5].messages?w?w.p(m,h):(w=ke(m),w.c(),w.m(t,null)):w&&(w.d(1),w=null),h&16&&l.value!==m[4]&&q(l,m[4]),h&66){I=m[6];let v;for(v=0;v<I.length;v+=1){const g=ye(m,I,v);T[v]?T[v].p(g,h):(T[v]=Ee(g),T[v].c(),T[v].m(n,null))}for(;v<T.length;v+=1)T[v].d(1);T.length=I.length}},i:X,o:X,d(m){m&&p(e),w&&w.d(),o[12](null),fe(T,m),W=!1,ce(U)}}}function at(o,e,t){let{friendUID:s}=e,{currentUser:l}=e,{chatRoomID:i}=e;const n=qe(),u=Ye(n,"sendTextMessage");let r,a,f,_=["now","today","any time"],z="any time",W={messages:[]};Ke(()=>{Se(Z(K,"chats",i),async h=>{if(console.log("Current data: ",h.data()),h.data()){t(5,W=h.data());const v=Z(K,"users",l.uid);te(v,{friendUIDsWithNewMessages:Je(i)}),await Ze(),r.focus(),r.scrollIntoView({block:"center",behavior:"smooth"}),a.scrollIntoView({block:"center",behavior:"smooth"})}})});async function U(){console.log("sendMessage()");const h=Z(K,"chats",i);te(h,{messages:he({content:f,timestamp:Date.now(),authorUID:l.uid})});const v=Z(K,"users",s);te(v,{friendUIDsWithNewMessages:he(i)});const g=await We(v);switch(z){case"any time":break;case"real-time":console.log("sending text to ,",g.data().phoneNumber),u({content:`${l.name} wrote "${f}"`,toWho:g.data().phoneNumber})}t(4,f="")}function w(h){ve[h?"unshift":"push"](()=>{a=h,t(3,a)})}function I(){f=this.value,t(4,f)}function T(h){ve[h?"unshift":"push"](()=>{r=h,t(2,r)})}const m=h=>t(1,z=h);return o.$$set=h=>{"friendUID"in h&&t(8,s=h.friendUID),"currentUser"in h&&t(0,l=h.currentUser),"chatRoomID"in h&&t(9,i=h.chatRoomID)},o.$$.update=()=>{o.$$.dirty&2&&console.log("reply within =",z)},[l,z,r,a,f,W,_,U,s,i,w,I,T,m]}class ut extends Pe{constructor(e){super();Re(this,e,at,rt,de,{friendUID:8,currentUser:0,chatRoomID:9})}}function ze(o,e,t){const s=o.slice();return s[33]=e[t],s}function Ue(o,e,t){const s=o.slice();return s[36]=e[t],s}function ft(o){let e,t,s,l,i,n,u,r,a,f,_,z,W,U,w,I,T,m=o[4].friends,h=[];for(let g=0;g<m.length;g+=1)h[g]=Ne(Ue(o,m,g));let v=o[11]&&Te(o);return{c(){e=b("div"),t=b("h2"),s=R("People"),l=C();for(let g=0;g<h.length;g+=1)h[g].c();i=C(),n=b("button"),u=R("Add person"),r=C(),v&&v.c(),a=C(),f=b("h2"),_=R("Editable category"),z=R(`
        Coming soon...

        `),W=b("h2"),U=R("Everyone else"),w=R(`
        No new message requests yet...`),this.h()},l(g){e=y(g,"DIV",{style:!0});var M=N(e);t=y(M,"H2",{class:!0});var D=N(t);s=S(D,"People"),D.forEach(p),l=P(M);for(let H=0;H<h.length;H+=1)h[H].l(M);i=P(M),n=y(M,"BUTTON",{style:!0});var j=N(n);u=S(j,"Add person"),j.forEach(p),r=P(M),v&&v.l(M),a=P(M),f=y(M,"H2",{class:!0,style:!0});var A=N(f);_=S(A,"Editable category"),A.forEach(p),z=S(M,`
        Coming soon...

        `),W=y(M,"H2",{class:!0,style:!0});var Q=N(W);U=S(Q,"Everyone else"),Q.forEach(p),w=S(M,`
        No new message requests yet...`),M.forEach(p),this.h()},h(){k(t,"class","message-group-title svelte-odgpo"),c(n,"margin-top","20px"),k(f,"class","message-group-title svelte-odgpo"),c(f,"margin-top","50px"),k(W,"class","message-group-title svelte-odgpo"),c(W,"margin-top","50px"),c(e,"width","100px")},m(g,M){V(g,e,M),d(e,t),d(t,s),d(e,l);for(let D=0;D<h.length;D+=1)h[D].m(e,null);d(e,i),d(e,n),d(n,u),d(e,r),v&&v.m(e,null),d(e,a),d(e,f),d(f,_),d(e,z),d(e,W),d(W,U),d(e,w),I||(T=L(n,"click",o[23]),I=!0)},p(g,M){if(M[0]&1072){m=g[4].friends;let D;for(D=0;D<m.length;D+=1){const j=Ue(g,m,D);h[D]?h[D].p(j,M):(h[D]=Ne(j),h[D].c(),h[D].m(e,i))}for(;D<h.length;D+=1)h[D].d(1);h.length=m.length}g[11]?v?v.p(g,M):(v=Te(g),v.c(),v.m(e,a)):v&&(v.d(1),v=null)},d(g){g&&p(e),fe(h,g),v&&v.d(),I=!1,T()}}}function ct(o){let e;function t(i,n){return i[8]?ht:dt}let s=t(o),l=s(o);return{c(){l.c(),e=G()},l(i){l.l(i),e=G()},m(i,n){l.m(i,n),V(i,e,n)},p(i,n){s===(s=t(i))&&l?l.p(i,n):(l.d(1),l=s(i),l&&(l.c(),l.m(e.parentNode,e)))},d(i){l.d(i),i&&p(e)}}}function Ne(o){let e,t,s=o[36].name+"",l,i=o[10].includes(o[36].uid)?"New messages":"",n,u,r;function a(){return o[22](o[36])}return{c(){e=b("div"),t=b("span"),l=R(s),n=R(i),this.h()},l(f){e=y(f,"DIV",{style:!0,class:!0});var _=N(e);t=y(_,"SPAN",{style:!0,class:!0});var z=N(t);l=S(z,s),n=S(z,i),z.forEach(p),_.forEach(p),this.h()},h(){c(t,"margin-left","5px"),k(t,"class","svelte-odgpo"),c(e,"border","solid orange"),c(e,"height","40px"),c(e,"display","flex"),c(e,"align-items","center"),k(e,"class","svelte-odgpo"),ae(e,"highlighted-box",o[36].uid===o[5])},m(f,_){V(f,e,_),d(e,t),d(t,l),d(t,n),u||(r=L(e,"click",a),u=!0)},p(f,_){o=f,_[0]&16&&s!==(s=o[36].name+"")&&x(l,s),_[0]&1040&&i!==(i=o[10].includes(o[36].uid)?"New messages":"")&&x(n,i),_[0]&48&&ae(e,"highlighted-box",o[36].uid===o[5])},d(f){f&&p(e),u=!1,r()}}}function Te(o){let e,t,s,l,i=o[14],n=[];for(let u=0;u<i.length;u+=1)n[u]=Me(ze(o,i,u));return{c(){e=b("div"),t=R("Here are all accounts:"),s=C();for(let u=0;u<n.length;u+=1)n[u].c();l=G()},l(u){e=y(u,"DIV",{});var r=N(e);t=S(r,"Here are all accounts:"),r.forEach(p),s=P(u);for(let a=0;a<n.length;a+=1)n[a].l(u);l=G()},m(u,r){V(u,e,r),d(e,t),V(u,s,r);for(let a=0;a<n.length;a+=1)n[a].m(u,r);V(u,l,r)},p(u,r){if(r[0]&49168){i=u[14];let a;for(a=0;a<i.length;a+=1){const f=ze(u,i,a);n[a]?n[a].p(f,r):(n[a]=Me(f),n[a].c(),n[a].m(l.parentNode,l))}for(;a<n.length;a+=1)n[a].d(1);n.length=i.length}},d(u){u&&p(e),u&&p(s),fe(n,u),u&&p(l)}}}function Ve(o){let e,t,s=o[33].name+"",l,i,n,u;function r(){return o[24](o[33])}return{c(){e=b("div"),t=b("button"),l=R(s),i=C(),this.h()},l(a){e=y(a,"DIV",{style:!0});var f=N(e);t=y(f,"BUTTON",{style:!0});var _=N(t);l=S(_,s),_.forEach(p),i=P(f),f.forEach(p),this.h()},h(){c(t,"margin-left","20px"),c(e,"margin-top","10px")},m(a,f){V(a,e,f),d(e,t),d(t,l),d(e,i),n||(u=L(t,"click",r),n=!0)},p(a,f){o=a},d(a){a&&p(e),n=!1,u()}}}function Me(o){let e,t=o[33].uid!==o[4].uid&&Ve(o);return{c(){t&&t.c(),e=G()},l(s){t&&t.l(s),e=G()},m(s,l){t&&t.m(s,l),V(s,e,l)},p(s,l){s[33].uid!==s[4].uid?t?t.p(s,l):(t=Ve(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(s){t&&t.d(s),s&&p(e)}}}function ht(o){let e,t,s,l,i,n,u;return{c(){e=b("div"),t=b("input"),s=C(),l=b("button"),i=R("Confirm code"),this.h()},l(r){e=y(r,"DIV",{style:!0});var a=N(e);t=y(a,"INPUT",{label:!0,placeholder:!0}),s=P(a),l=y(a,"BUTTON",{});var f=N(l);i=S(f,"Confirm code"),f.forEach(p),a.forEach(p),this.h()},h(){k(t,"label","6-digit code"),k(t,"placeholder","123456"),c(e,"display","flex")},m(r,a){V(r,e,a),d(e,t),q(t,o[9]),d(e,s),d(e,l),d(l,i),n||(u=[L(t,"input",o[21]),L(l,"click",o[13])],n=!0)},p(r,a){a[0]&512&&t.value!==r[9]&&q(t,r[9])},d(r){r&&p(e),n=!1,ce(u)}}}function dt(o){let e,t,s,l,i,n,u,r,a,f,_,z,W,U,w,I,T,m,h,v,g,M,D,j,A,Q,H,$,ee,ne;return{c(){e=b("div"),t=b("b"),s=R("What problem does this solve:"),l=R(`
          Everytime someone messages us, we get a notification IMMEDIATELY, regardless of whether the message is time-sensitive, or even important. 
          Even if you try to ignore it, visually they go to the top of our chat list; 
          if you visited Messenger for a specific purpose, the top message distractions will help you forget what you were doing.
          Multiply that by all the people you message across time, and it's a disaster . 

          `),i=b("br"),n=b("br"),u=C(),r=b("b"),a=R("How this app differs"),f=C(),_=b("ol"),z=b("li"),W=R(`Messages have no notifications by default unless the other person specifies it's time-sensitive e.g. "Before today" / "This week"`),U=C(),w=b("li"),I=R("Left-side is organized intentionally - NOT by whoever messaged you most recently"),T=C(),m=b("div"),h=b("input"),v=C(),g=b("input"),M=C(),D=b("input"),j=C(),A=b("input"),Q=C(),H=b("div"),$=R("Sign Up"),this.h()},l(O){e=y(O,"DIV",{style:!0});var E=N(e);t=y(E,"B",{});var B=N(t);s=S(B,"What problem does this solve:"),B.forEach(p),l=S(E,`
          Everytime someone messages us, we get a notification IMMEDIATELY, regardless of whether the message is time-sensitive, or even important. 
          Even if you try to ignore it, visually they go to the top of our chat list; 
          if you visited Messenger for a specific purpose, the top message distractions will help you forget what you were doing.
          Multiply that by all the people you message across time, and it's a disaster . 

          `),i=y(E,"BR",{}),n=y(E,"BR",{}),u=P(E),r=y(E,"B",{});var F=N(r);a=S(F,"How this app differs"),F.forEach(p),f=P(E),_=y(E,"OL",{});var Y=N(_);z=y(Y,"LI",{});var se=N(z);W=S(se,`Messages have no notifications by default unless the other person specifies it's time-sensitive e.g. "Before today" / "This week"`),se.forEach(p),U=P(Y),w=y(Y,"LI",{});var oe=N(w);I=S(oe,"Left-side is organized intentionally - NOT by whoever messaged you most recently"),oe.forEach(p),Y.forEach(p),E.forEach(p),T=P(O),m=y(O,"DIV",{style:!0});var J=N(m);h=y(J,"INPUT",{type:!0,id:!0,minlength:!0,maxlength:!0,placeholder:!0,style:!0}),v=P(J),g=y(J,"INPUT",{type:!0,id:!0,minlength:!0,maxlength:!0,placeholder:!0,style:!0}),M=P(J),D=y(J,"INPUT",{type:!0,id:!0,minlength:!0,maxlength:!0,placeholder:!0,style:!0}),j=P(J),A=y(J,"INPUT",{type:!0,id:!0,minlength:!0,maxlength:!0,placeholder:!0,style:!0}),Q=P(J),H=y(J,"DIV",{id:!0,style:!0});var pe=N(H);$=S(pe,"Sign Up"),pe.forEach(p),J.forEach(p),this.h()},h(){c(e,"font-family","Roboto, sans-serif"),c(e,"font-size","1.5rem"),c(e,"color","grey"),c(e,"margin-top","20px"),k(h,"type","tel"),k(h,"id","phone-input-1"),k(h,"minlength","2"),k(h,"maxlength","4"),k(h,"placeholder","+1"),c(h,"width","36px"),c(h,"height","40px"),c(h,"font-size","2rem"),c(h,"margin-right","10px"),k(g,"type","tel"),k(g,"id","phone-input-1"),k(g,"minlength","3"),k(g,"maxlength","3"),k(g,"placeholder","339"),c(g,"width","54px"),c(g,"height","40px"),c(g,"font-size","2rem"),c(g,"margin-right","10px"),k(D,"type","tel"),k(D,"id","phone-input-2"),k(D,"minlength","3"),k(D,"maxlength","3"),k(D,"placeholder","676"),c(D,"width","54px"),c(D,"height","40px"),c(D,"font-size","2rem"),c(D,"margin-right","10px"),k(A,"type","tel"),k(A,"id","phone-input-3"),k(A,"minlength","4"),k(A,"maxlength","4"),k(A,"placeholder","1234"),c(A,"width","76px"),c(A,"height","40px"),c(A,"font-size","2rem"),c(A,"margin-right","10px"),k(H,"id","sign-in-button"),c(H,"border","solid"),c(H,"padding","6px"),c(m,"display","flex"),c(m,"justify-content","center"),c(m,"align-items","center"),c(m,"width","400px"),c(m,"margin-top","25px")},m(O,E){V(O,e,E),d(e,t),d(t,s),d(e,l),d(e,i),d(e,n),d(e,u),d(e,r),d(r,a),d(e,f),d(e,_),d(_,z),d(z,W),d(_,U),d(_,w),d(w,I),V(O,T,E),V(O,m,E),d(m,h),q(h,o[7]),d(m,v),d(m,g),q(g,o[0]),d(m,M),d(m,D),q(D,o[1]),d(m,j),d(m,A),q(A,o[2]),d(m,Q),d(m,H),d(H,$),ee||(ne=[L(h,"input",o[17]),L(g,"input",o[18]),L(D,"input",o[19]),L(A,"input",o[20]),L(H,"click",o[12])],ee=!0)},p(O,E){E[0]&128&&q(h,O[7]),E[0]&1&&q(g,O[0]),E[0]&2&&q(D,O[1]),E[0]&4&&q(A,O[2])},d(O){O&&p(e),O&&p(T),O&&p(m),ee=!1,ce(ne)}}}function pt(o){let e,t,s,l,i,n,u,r,a;return{c(){e=b("div"),t=R("Click any chat on the left-side"),s=C(),l=b("input"),i=C(),n=b("button"),u=R("Update name"),this.h()},l(f){e=y(f,"DIV",{style:!0});var _=N(e);t=S(_,"Click any chat on the left-side"),_.forEach(p),s=P(f),l=y(f,"INPUT",{placeholder:!0}),i=P(f),n=y(f,"BUTTON",{});var z=N(n);u=S(z,"Update name"),z.forEach(p),this.h()},h(){c(e,"margin-top","5px"),c(e,"margin-bottom","12px"),k(l,"placeholder","John Apple")},m(f,_){V(f,e,_),d(e,t),V(f,s,_),V(f,l,_),q(l,o[6]),V(f,i,_),V(f,n,_),d(n,u),r||(a=[L(l,"input",o[25]),L(n,"click",o[16])],r=!0)},p(f,_){_[0]&64&&l.value!==f[6]&&q(l,f[6])},i:X,o:X,d(f){f&&p(e),f&&p(s),f&&p(l),f&&p(i),f&&p(n),r=!1,ce(a)}}}function mt(o){let e=o[5],t,s,l=Ce(o);return{c(){l.c(),t=G()},l(i){l.l(i),t=G()},m(i,n){l.m(i,n),V(i,t,n),s=!0},p(i,n){n[0]&32&&de(e,e=i[5])?(Be(),le(l,1,1,X),Ae(),l=Ce(i),l.c(),ie(l),l.m(t.parentNode,t)):l.p(i,n)},i(i){s||(ie(l),s=!0)},o(i){le(l),s=!1},d(i){i&&p(t),l.d(i)}}}function Ce(o){let e,t;return e=new ut({props:{chatRoomID:o[3],friendUID:o[5],otherPersonUID:o[5],currentUser:o[4]}}),{c(){et(e.$$.fragment)},l(s){tt(e.$$.fragment,s)},m(s,l){lt(e,s,l),t=!0},p(s,l){const i={};l[0]&8&&(i.chatRoomID=s[3]),l[0]&32&&(i.friendUID=s[5]),l[0]&32&&(i.otherPersonUID=s[5]),l[0]&16&&(i.currentUser=s[4]),e.$set(i)},i(s){t||(ie(e.$$.fragment,s),t=!0)},o(s){le(e.$$.fragment,s),t=!1},d(s){it(e,s)}}}function _t(o){let e,t,s,l,i,n,u;function r(U,w){return U[4]?ft:ct}let a=r(o),f=a(o);const _=[mt,pt],z=[];function W(U,w){return U[5]&&U[4]&&U[3]?0:U[4]?1:-1}return~(i=W(o))&&(n=z[i]=_[i](o)),{c(){e=b("div"),t=b("div"),f.c(),s=C(),l=b("div"),n&&n.c(),this.h()},l(U){e=y(U,"DIV",{style:!0});var w=N(e);t=y(w,"DIV",{});var I=N(t);f.l(I),I.forEach(p),s=P(w),l=y(w,"DIV",{style:!0});var T=N(l);n&&n.l(T),T.forEach(p),w.forEach(p),this.h()},h(){c(l,"width","320px"),c(l,"margin-left","5px"),c(l,"margin-top","5px"),c(e,"display","flex"),c(e,"padding-left","5px"),c(e,"padding-right","5px")},m(U,w){V(U,e,w),d(e,t),f.m(t,null),d(e,s),d(e,l),~i&&z[i].m(l,null),u=!0},p(U,w){a===(a=r(U))&&f?f.p(U,w):(f.d(1),f=a(U),f&&(f.c(),f.m(t,null)));let I=i;i=W(U),i===I?~i&&z[i].p(U,w):(n&&(Be(),le(z[I],1,1,()=>{z[I]=null}),Ae()),~i?(n=z[i],n?n.p(U,w):(n=z[i]=_[i](U),n.c()),ie(n,1),n.m(l,null)):n=null)},i(U){u||(ie(n),u=!0)},o(U){le(n),u=!1},d(U){U&&p(e),f.d(),~i&&z[i].d()}}}function gt(o,e,t){let s="",l,i="+1",n="",u="",r="",a,f="",_="",z=[];function W(){console.log("signInWithPhone()"),window.recaptchaVerifier||(window.recaptchaVerifier=new xe("sign-in-button",{size:"invisible",callback:B=>{console.log("reCAPTCHA solved =",B)}},re()),l=window.recaptchaVerifier),E();function E(){const B=`${i} ${n}-${u}-${r}`;print(re(),B,l),$e(re(),B,l).then(F=>{console.log("confirmation result =",F),t(8,a=F),window.confirmationResult=F}).catch(F=>{alert(F),console.log("error =",F),window.recaptchaVerifier.render().then(function(Y){grecaptcha.reset(Y)})})}}function U(){console.log("phoneConfirmCode =",f),window.confirmationResult.confirm(f).then(E=>{}).catch(E=>{alert(E)})}const w=re();let I=null,T="",m=[],h=!1;const v=Ge(K,"users");Qe(v).then(E=>{E.docs.forEach(B=>{m.push(ge({uid:B.id},B.data()))})});async function g({name:E,uid:B}){for(const oe of I.friends)if(oe.uid===B){alert("You're already friends"),t(11,h=!1);return}const F=Z(K,"users",I.uid);await te(F,{friends:he({name:E,uid:B})});const Y=I.uid<B?I.uid+B:B+I.uid,se=Z(K,"chats",Y);await be(se,{participantUIDs:[B,I.uid],messages:[]}),t(11,h=!1)}Xe(w,async E=>{if(E){const B=Z(K,"users",E.uid),F=await We(B);if(F.exists())t(4,I=F.data());else{const Y={uid:E.uid,name:E.displayName||"John Apple",phoneNumber:E.phoneNumber,friends:[],family:[],VIPs:[],everyoneElse:[]};await be(Z(K,"users",E.uid),Y),t(4,I=Y)}Se(Z(K,"users",E.uid),Y=>{t(4,I=Y.data()),I.friendUIDsWithNewMessages&&t(10,z=I.friendUIDsWithNewMessages)})}});async function M(){await te(Z(K,"users",I.uid),{name:s}),t(6,s=""),alert("successfully updated")}function D(){i=this.value,t(7,i)}function j(){n=this.value,t(0,n)}function A(){u=this.value,t(1,u)}function Q(){r=this.value,t(2,r)}function H(){f=this.value,t(9,f)}const $=E=>t(5,T=E.uid),ee=()=>t(11,h=!h),ne=E=>g(E);function O(){s=this.value,t(6,s)}return o.$$.update=()=>{o.$$.dirty[0]&56&&T&&(t(3,_=I.uid<T?I.uid+T:T+I.uid),console.log("chatRoomID =",_)),o.$$.dirty[0]&1&&n.length===3&&document.getElementById("phone-input-2").focus(),o.$$.dirty[0]&2&&u.length===3&&document.getElementById("phone-input-3").focus(),o.$$.dirty[0]&4&&r.length===4&&W()},[n,u,r,_,I,T,s,i,a,f,z,h,W,U,m,g,M,D,j,A,Q,H,$,ee,ne,O]}class yt extends Pe{constructor(e){super();Re(this,e,gt,_t,de,{},null,[-1,-1])}}export{yt as default};
