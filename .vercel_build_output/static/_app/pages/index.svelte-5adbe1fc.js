var ze=Object.defineProperty;var de=Object.getOwnPropertySymbols;var We=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable;var pe=(l,e,t)=>e in l?ze(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,me=(l,e)=>{for(var t in e||(e={}))We.call(e,t)&&pe(l,t,e[t]);if(de)for(var t of de(e))Ae.call(e,t)&&pe(l,t,e[t]);return l};import{L as Be,M as Oe,S as Ue,i as Ve,s as Me,e as k,t as W,k as O,c as E,a as C,h as A,d as p,m as R,f as _,g as P,J as m,j as te,b as T,N as ie,O as H,P as L,K as le,Q as ne,R as oe,T as Re,U as He,v as je,V as Te,W as Fe,X as Le,Y as Pe,Z as Ce,_ as J,$ as X,a0 as qe,a1 as re,a2 as Se,o as ae,p as Ye,q as ue,a3 as ee,a4 as Ze,n as Ke,a5 as Je,a6 as xe,a7 as _e,l as se,w as Ge,x as Qe,y as Xe,B as $e}from"../chunks/vendor-398c4e20.js";const et={apiKey:"AIzaSyCMj9SsNMKDI9EezOzg_jowsYUOfaCbivc",authDomain:"project-z-e00fd.firebaseapp.com",projectId:"project-z-e00fd",storageBucket:"project-z-e00fd.appspot.com",messagingSenderId:"37588438028",appId:"1:37588438028:web:82c870a2fe6af985d67229",measurementId:"G-W20KMPGM93"};Be(et);var q=Oe();function tt(){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let e="";for(let t=0;t<20;t++)e+=l.charAt(Math.floor(Math.random()*l.length));return e}const ge=function(l,e={month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"utc"}){const t=new Date(l);let s=t.getTimezoneOffset()*6e4;return new Date(t-s).toLocaleDateString("en-US",e)};function ve(l,e,t){const s=l.slice();return s[13]=e[t],s}function ye(l,e,t){const s=l.slice();return s[16]=e[t],s}function be(l){let e,t,s=l[16].content+"",n,i,r,a=ge(l[16].timestamp)+"",u;return{c(){e=k("div"),t=k("p"),n=W(s),i=O(),r=k("p"),u=W(a),this.h()},l(h){e=E(h,"DIV",{style:!0});var d=C(e);t=E(d,"P",{});var I=C(t);n=A(I,s),I.forEach(p),i=R(d),r=E(d,"P",{style:!0});var w=C(r);u=A(w,a),w.forEach(p),d.forEach(p),this.h()},h(){_(r,"margin-left","auto"),_(r,"margin-right","0"),_(e,"display","flex")},m(h,d){P(h,e,d),m(e,t),m(t,n),m(e,i),m(e,r),m(r,u)},p(h,d){d&4&&s!==(s=h[16].content+"")&&te(n,s),d&4&&a!==(a=ge(h[16].timestamp)+"")&&te(u,a)},d(h){h&&p(e)}}}function we(l){let e,t=l[13]+"",s,n,i,r;function a(){return l[8](l[13])}return{c(){e=k("div"),s=W(t),n=O(),this.h()},l(u){e=E(u,"DIV",{class:!0,style:!0});var h=C(e);s=A(h,t),n=R(h),h.forEach(p),this.h()},h(){T(e,"class","clickable-option svelte-tz8lu4"),_(e,"margin-left","20px"),ie(e,"highlighted-box",l[1]===l[13])},m(u,h){P(u,e,h),m(e,s),m(e,n),i||(r=H(e,"click",a),i=!0)},p(u,h){l=u,h&10&&ie(e,"highlighted-box",l[1]===l[13])},d(u){u&&p(e),i=!1,r()}}}function it(l){let e,t,s,n,i,r,a,u,h,d,I,w,y,g=l[2].messages,c=[];for(let f=0;f<g.length;f+=1)c[f]=be(ye(l,g,f));let S=l[3],N=[];for(let f=0;f<S.length;f+=1)N[f]=we(ve(l,S,f));return{c(){e=k("div");for(let f=0;f<c.length;f+=1)c[f].c();t=O(),s=k("input"),n=O(),i=k("div"),r=k("div"),a=W("Hope for a reply:"),u=O();for(let f=0;f<N.length;f+=1)N[f].c();h=O(),d=k("button"),I=W("Send message"),this.h()},l(f){e=E(f,"DIV",{});var D=C(e);for(let o=0;o<c.length;o+=1)c[o].l(D);t=R(D),s=E(D,"INPUT",{style:!0,placeholder:!0}),n=R(D),i=E(D,"DIV",{style:!0});var v=C(i);r=E(v,"DIV",{style:!0});var b=C(r);a=A(b,"Hope for a reply:"),b.forEach(p),u=R(v);for(let o=0;o<N.length;o+=1)N[o].l(v);v.forEach(p),h=R(D),d=E(D,"BUTTON",{style:!0});var B=C(d);I=A(B,"Send message"),B.forEach(p),D.forEach(p),this.h()},h(){_(s,"width","100%"),T(s,"placeholder","Type message here..."),_(r,"color","grey"),_(i,"display","flex"),_(i,"margin-top","10px"),_(i,"align-items","center"),_(d,"margin-top","12px"),_(d,"height","30px"),_(d,"width","410px")},m(f,D){P(f,e,D);for(let v=0;v<c.length;v+=1)c[v].m(e,null);m(e,t),m(e,s),L(s,l[0]),m(e,n),m(e,i),m(i,r),m(r,a),m(i,u);for(let v=0;v<N.length;v+=1)N[v].m(i,null);m(e,h),m(e,d),m(d,I),w||(y=[H(s,"input",l[7]),H(d,"click",l[4])],w=!0)},p(f,[D]){if(D&4){g=f[2].messages;let v;for(v=0;v<g.length;v+=1){const b=ye(f,g,v);c[v]?c[v].p(b,D):(c[v]=be(b),c[v].c(),c[v].m(e,t))}for(;v<c.length;v+=1)c[v].d(1);c.length=g.length}if(D&1&&s.value!==f[0]&&L(s,f[0]),D&10){S=f[3];let v;for(v=0;v<S.length;v+=1){const b=ve(f,S,v);N[v]?N[v].p(b,D):(N[v]=we(b),N[v].c(),N[v].m(i,null))}for(;v<N.length;v+=1)N[v].d(1);N.length=S.length}},i:le,o:le,d(f){f&&p(e),ne(c,f),ne(N,f),w=!1,oe(y)}}}function lt(l,e,t){let{friendUID:s}=e,{currentUser:n}=e;const i=Re(),r=He(i,"sendTextMessage");let a,u,h=["real-time","today","this week","anytime"],d="anytime",I={messages:[]};je(()=>{const c=Te(q,"chats"),S=Fe(c,Le("participantUIDs","array-contains",s));Pe(S).then(N=>{console.log("result =",N),N.docs.forEach(f=>{console.log("doc =",f),f.data().participantUIDs.includes(n.uid)&&(a=f.id)}),Ce(J(q,"chats",a),f=>{console.log("Current data: ",f.data()),t(2,I=f.data());const D=J(q,"users",n.uid);X(D,{friendUIDsWithNewMessages:qe(a)})})})});async function w(){console.log("sendMessage()");const c=J(q,"chats",a);X(c,{messages:re({content:u,timestamp:Date.now()})});const S=n.uid,N=J(q,"users",S);X(N,{friendUIDsWithNewMessages:re(a)});const f=await Se(N);switch(d){case"anytime":break;case"real-time":console.log("sending text to ,",f.data().phoneNumber),r({content:`${n.name} wrote "${u}"`,toWho:f.data().phoneNumber})}t(0,u="")}function y(){u=this.value,t(0,u)}const g=c=>t(1,d=c);return l.$$set=c=>{"friendUID"in c&&t(5,s=c.friendUID),"currentUser"in c&&t(6,n=c.currentUser)},[u,d,I,h,w,s,n,y,g]}class nt extends Ue{constructor(e){super();Ve(this,e,lt,it,Me,{friendUID:5,currentUser:6})}}function Ie(l,e,t){const s=l.slice();return s[32]=e[t],s}function ke(l,e,t){const s=l.slice();return s[35]=e[t],s}function st(l){let e,t,s,n,i,r,a,u,h,d,I,w,y,g,c,S,N,f,D,v=l[8].friends,b=[];for(let o=0;o<v.length;o+=1)b[o]=Ee(ke(l,v,o));let B=l[10]&&De(l);return{c(){e=k("h2"),t=W("Friends"),s=O();for(let o=0;o<b.length;o+=1)b[o].c();n=O(),i=k("button"),r=W("Add new friend"),a=O(),B&&B.c(),u=O(),h=k("h2"),d=W("Family"),I=W(`
      No family...

      `),w=k("h2"),y=W("Other VIPs"),g=W(`
      No VIPs yet...

      `),c=k("h2"),S=W("Everyone else"),N=W(`
      No new message requests yet...`),this.h()},l(o){e=E(o,"H2",{class:!0});var z=C(e);t=A(z,"Friends"),z.forEach(p),s=R(o);for(let x=0;x<b.length;x+=1)b[x].l(o);n=R(o),i=E(o,"BUTTON",{style:!0});var V=C(i);r=A(V,"Add new friend"),V.forEach(p),a=R(o),B&&B.l(o),u=R(o),h=E(o,"H2",{class:!0,style:!0});var Y=C(h);d=A(Y,"Family"),Y.forEach(p),I=A(o,`
      No family...

      `),w=E(o,"H2",{class:!0,style:!0});var j=C(w);y=A(j,"Other VIPs"),j.forEach(p),g=A(o,`
      No VIPs yet...

      `),c=E(o,"H2",{class:!0,style:!0});var G=C(c);S=A(G,"Everyone else"),G.forEach(p),N=A(o,`
      No new message requests yet...`),this.h()},h(){T(e,"class","message-group-title svelte-ewe8mg"),_(i,"margin-top","20px"),T(h,"class","message-group-title svelte-ewe8mg"),_(h,"margin-top","50px"),T(w,"class","message-group-title svelte-ewe8mg"),_(w,"margin-top","50px"),T(c,"class","message-group-title svelte-ewe8mg"),_(c,"margin-top","50px")},m(o,z){P(o,e,z),m(e,t),P(o,s,z);for(let V=0;V<b.length;V+=1)b[V].m(o,z);P(o,n,z),P(o,i,z),m(i,r),P(o,a,z),B&&B.m(o,z),P(o,u,z),P(o,h,z),m(h,d),P(o,I,z),P(o,w,z),m(w,y),P(o,g,z),P(o,c,z),m(c,S),P(o,N,z),f||(D=H(i,"click",l[22]),f=!0)},p(o,z){if(z[0]&896){v=o[8].friends;let V;for(V=0;V<v.length;V+=1){const Y=ke(o,v,V);b[V]?b[V].p(Y,z):(b[V]=Ee(Y),b[V].c(),b[V].m(n.parentNode,n))}for(;V<b.length;V+=1)b[V].d(1);b.length=v.length}o[10]?B?B.p(o,z):(B=De(o),B.c(),B.m(u.parentNode,u)):B&&(B.d(1),B=null)},d(o){o&&p(e),o&&p(s),ne(b,o),o&&p(n),o&&p(i),o&&p(a),B&&B.d(o),o&&p(u),o&&p(h),o&&p(I),o&&p(w),o&&p(g),o&&p(c),o&&p(N),f=!1,D()}}}function ot(l){let e;function t(i,r){return i[5]?rt:at}let s=t(l),n=s(l);return{c(){n.c(),e=se()},l(i){n.l(i),e=se()},m(i,r){n.m(i,r),P(i,e,r)},p(i,r){s===(s=t(i))&&n?n.p(i,r):(n.d(1),n=s(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){n.d(i),i&&p(e)}}}function Ee(l){let e,t,s=l[35].name+"",n,i=l[7].includes(l[35].uid)?"New messages":"",r,a,u;function h(){return l[21](l[35])}return{c(){e=k("div"),t=k("span"),n=W(s),r=W(i),this.h()},l(d){e=E(d,"DIV",{style:!0,class:!0});var I=C(e);t=E(I,"SPAN",{style:!0,class:!0});var w=C(t);n=A(w,s),r=A(w,i),w.forEach(p),I.forEach(p),this.h()},h(){_(t,"margin-left","5px"),T(t,"class","svelte-ewe8mg"),_(e,"border","solid orange"),_(e,"height","40px"),_(e,"display","flex"),_(e,"align-items","center"),T(e,"class","svelte-ewe8mg"),ie(e,"highlighted-box",l[9])},m(d,I){P(d,e,I),m(e,t),m(t,n),m(t,r),a||(u=H(e,"click",h),a=!0)},p(d,I){l=d,I[0]&256&&s!==(s=l[35].name+"")&&te(n,s),I[0]&384&&i!==(i=l[7].includes(l[35].uid)?"New messages":"")&&te(r,i),I[0]&512&&ie(e,"highlighted-box",l[9])},d(d){d&&p(e),a=!1,u()}}}function De(l){let e,t,s=l[13],n=[];for(let i=0;i<s.length;i+=1)n[i]=Ne(Ie(l,s,i));return{c(){e=W(`Below are all the accounts that exist on Zen Messenger, click to add as friend:
        `);for(let i=0;i<n.length;i+=1)n[i].c();t=se()},l(i){e=A(i,`Below are all the accounts that exist on Zen Messenger, click to add as friend:
        `);for(let r=0;r<n.length;r+=1)n[r].l(i);t=se()},m(i,r){P(i,e,r);for(let a=0;a<n.length;a+=1)n[a].m(i,r);P(i,t,r)},p(i,r){if(r[0]&24576){s=i[13];let a;for(a=0;a<s.length;a+=1){const u=Ie(i,s,a);n[a]?n[a].p(u,r):(n[a]=Ne(u),n[a].c(),n[a].m(t.parentNode,t))}for(;a<n.length;a+=1)n[a].d(1);n.length=s.length}},d(i){i&&p(e),ne(n,i),i&&p(t)}}}function Ne(l){let e,t=l[32].name+"",s,n,i,r;function a(){return l[23](l[32])}return{c(){e=k("div"),s=W(t),n=O(),this.h()},l(u){e=E(u,"DIV",{style:!0});var h=C(e);s=A(h,t),n=R(h),h.forEach(p),this.h()},h(){_(e,"margin-left","20px")},m(u,h){P(u,e,h),m(e,s),m(e,n),i||(r=H(e,"click",a),i=!0)},p(u,h){l=u},d(u){u&&p(e),i=!1,r()}}}function rt(l){let e,t,s,n,i,r,a;return{c(){e=k("div"),t=k("input"),s=O(),n=k("div"),i=W("Confirm code"),this.h()},l(u){e=E(u,"DIV",{style:!0});var h=C(e);t=E(h,"INPUT",{label:!0,placeholder:!0}),s=R(h),n=E(h,"DIV",{});var d=C(n);i=A(d,"Confirm code"),d.forEach(p),h.forEach(p),this.h()},h(){T(t,"label","6-digit code"),T(t,"placeholder","123456"),_(e,"display","flex")},m(u,h){P(u,e,h),m(e,t),L(t,l[6]),m(e,s),m(e,n),m(n,i),r||(a=[H(t,"input",l[20]),H(n,"click",l[12])],r=!0)},p(u,h){h[0]&64&&t.value!==u[6]&&L(t,u[6])},d(u){u&&p(e),r=!1,oe(a)}}}function at(l){let e,t,s,n,i,r,a,u,h,d,I,w,y,g,c,S,N,f,D,v,b,B,o,z,V,Y,j,G,x,$;return{c(){e=k("div"),t=k("b"),s=W("What problem does this solve:"),n=W(`
          Everytime someone messages us, we get a notification IMMEDIATELY, regardless of whether the message is time-sensitive, or even important. 
          Even if you try to ignore it, visually they go to the top of our chat list; multiply that by all the people you message across time, and it's a disaster for productivity and mental health.

          `),i=k("br"),r=k("br"),a=O(),u=k("b"),h=W("How this app is different"),d=O(),I=k("ol"),w=k("li"),y=W(`Messages have no notifications by default unless the other person specifies it's time-sensitive e.g. "Before Monday" / "This week"`),g=O(),c=k("li"),S=W("Left-side is organized intentionally - NOT by whoever messaged you most recently"),N=O(),f=k("div"),D=k("input"),v=O(),b=k("input"),B=O(),o=k("input"),z=O(),V=k("input"),Y=O(),j=k("div"),G=W("Sign Up"),this.h()},l(U){e=E(U,"DIV",{style:!0});var M=C(e);t=E(M,"B",{});var F=C(t);s=A(F,"What problem does this solve:"),F.forEach(p),n=A(M,`
          Everytime someone messages us, we get a notification IMMEDIATELY, regardless of whether the message is time-sensitive, or even important. 
          Even if you try to ignore it, visually they go to the top of our chat list; multiply that by all the people you message across time, and it's a disaster for productivity and mental health.

          `),i=E(M,"BR",{}),r=E(M,"BR",{}),a=R(M),u=E(M,"B",{});var Z=C(u);h=A(Z,"How this app is different"),Z.forEach(p),d=R(M),I=E(M,"OL",{});var Q=C(I);w=E(Q,"LI",{});var fe=C(w);y=A(fe,`Messages have no notifications by default unless the other person specifies it's time-sensitive e.g. "Before Monday" / "This week"`),fe.forEach(p),g=R(Q),c=E(Q,"LI",{});var he=C(c);S=A(he,"Left-side is organized intentionally - NOT by whoever messaged you most recently"),he.forEach(p),Q.forEach(p),M.forEach(p),N=R(U),f=E(U,"DIV",{style:!0});var K=C(f);D=E(K,"INPUT",{type:!0,id:!0,minlength:!0,maxlength:!0,placeholder:!0,style:!0}),v=R(K),b=E(K,"INPUT",{type:!0,id:!0,minlength:!0,maxlength:!0,placeholder:!0,style:!0}),B=R(K),o=E(K,"INPUT",{type:!0,id:!0,minlength:!0,maxlength:!0,placeholder:!0,style:!0}),z=R(K),V=E(K,"INPUT",{type:!0,id:!0,minlength:!0,maxlength:!0,placeholder:!0,style:!0}),Y=R(K),j=E(K,"DIV",{id:!0,style:!0});var ce=C(j);G=A(ce,"Sign Up"),ce.forEach(p),K.forEach(p),this.h()},h(){_(e,"font-family","Roboto, sans-serif"),_(e,"font-size","1.5rem"),_(e,"color","grey"),_(e,"margin-top","20px"),T(D,"type","tel"),T(D,"id","phone-input-1"),T(D,"minlength","2"),T(D,"maxlength","3"),T(D,"placeholder","+1"),_(D,"width","36px"),_(D,"height","40px"),_(D,"font-size","2rem"),_(D,"margin-right","10px"),T(b,"type","tel"),T(b,"id","phone-input-1"),T(b,"minlength","3"),T(b,"maxlength","3"),T(b,"placeholder","339"),_(b,"width","54px"),_(b,"height","40px"),_(b,"font-size","2rem"),_(b,"margin-right","10px"),T(o,"type","tel"),T(o,"id","phone-input-2"),T(o,"minlength","3"),T(o,"maxlength","3"),T(o,"placeholder","676"),_(o,"width","54px"),_(o,"height","40px"),_(o,"font-size","2rem"),_(o,"margin-right","10px"),T(V,"type","tel"),T(V,"id","phone-input-3"),T(V,"minlength","4"),T(V,"maxlength","4"),T(V,"placeholder","1234"),_(V,"width","76px"),_(V,"height","40px"),_(V,"font-size","2rem"),_(V,"margin-right","10px"),T(j,"id","sign-in-button"),_(j,"border","solid"),_(j,"padding","6px"),_(f,"display","flex"),_(f,"justify-content","center"),_(f,"align-items","center"),_(f,"width","400px"),_(f,"margin-top","25px")},m(U,M){P(U,e,M),m(e,t),m(t,s),m(e,n),m(e,i),m(e,r),m(e,a),m(e,u),m(u,h),m(e,d),m(e,I),m(I,w),m(w,y),m(I,g),m(I,c),m(c,S),P(U,N,M),P(U,f,M),m(f,D),L(D,l[4]),m(f,v),m(f,b),L(b,l[0]),m(f,B),m(f,o),L(o,l[1]),m(f,z),m(f,V),L(V,l[2]),m(f,Y),m(f,j),m(j,G),x||($=[H(D,"input",l[16]),H(b,"input",l[17]),H(o,"input",l[18]),H(V,"input",l[19]),H(j,"click",l[11])],x=!0)},p(U,M){M[0]&16&&L(D,U[4]),M[0]&1&&L(b,U[0]),M[0]&2&&L(o,U[1]),M[0]&4&&L(V,U[2])},d(U){U&&p(e),U&&p(N),U&&p(f),x=!1,oe($)}}}function ut(l){let e,t,s,n,i,r,a,u,h,d,I,w;return{c(){e=k("div"),t=W("Click any chat on the left-side"),s=O(),n=k("div"),i=W("Set your name here"),r=O(),a=k("input"),u=O(),h=k("button"),d=W("Update name"),this.h()},l(y){e=E(y,"DIV",{style:!0});var g=C(e);t=A(g,"Click any chat on the left-side"),g.forEach(p),s=R(y),n=E(y,"DIV",{});var c=C(n);i=A(c,"Set your name here"),c.forEach(p),r=R(y),a=E(y,"INPUT",{placeholder:!0}),u=R(y),h=E(y,"BUTTON",{});var S=C(h);d=A(S,"Update name"),S.forEach(p),this.h()},h(){_(e,"margin-top","18px"),T(a,"placeholder","John Apple")},m(y,g){P(y,e,g),m(e,t),P(y,s,g),P(y,n,g),m(n,i),P(y,r,g),P(y,a,g),L(a,l[3]),P(y,u,g),P(y,h,g),m(h,d),I||(w=[H(a,"input",l[24]),H(h,"click",l[15])],I=!0)},p(y,g){g[0]&8&&a.value!==y[3]&&L(a,y[3])},i:le,o:le,d(y){y&&p(e),y&&p(s),y&&p(n),y&&p(r),y&&p(a),y&&p(u),y&&p(h),I=!1,oe(w)}}}function ft(l){let e,t;return e=new nt({props:{friendUID:l[9],currentUser:l[8]}}),{c(){Ge(e.$$.fragment)},l(s){Qe(e.$$.fragment,s)},m(s,n){Xe(e,s,n),t=!0},p(s,n){const i={};n[0]&512&&(i.friendUID=s[9]),n[0]&256&&(i.currentUser=s[8]),e.$set(i)},i(s){t||(ue(e.$$.fragment,s),t=!0)},o(s){ae(e.$$.fragment,s),t=!1},d(s){$e(e,s)}}}function ht(l){let e,t,s,n,i,r,a;function u(g,c){return g[8]?st:ot}let h=u(l),d=h(l);const I=[ft,ut],w=[];function y(g,c){return g[9]&&g[8]?0:g[8]?1:-1}return~(i=y(l))&&(r=w[i]=I[i](l)),{c(){e=k("div"),t=k("div"),d.c(),s=O(),n=k("div"),r&&r.c(),this.h()},l(g){e=E(g,"DIV",{style:!0});var c=C(e);t=E(c,"DIV",{});var S=C(t);d.l(S),S.forEach(p),s=R(c),n=E(c,"DIV",{style:!0});var N=C(n);r&&r.l(N),N.forEach(p),c.forEach(p),this.h()},h(){_(n,"width","60%"),_(n,"margin-left","20px"),_(n,"margin-top","5px"),_(e,"display","flex"),_(e,"padding-left","20px"),_(e,"padding-right","20px")},m(g,c){P(g,e,c),m(e,t),d.m(t,null),m(e,s),m(e,n),~i&&w[i].m(n,null),a=!0},p(g,c){h===(h=u(g))&&d?d.p(g,c):(d.d(1),d=h(g),d&&(d.c(),d.m(t,null)));let S=i;i=y(g),i===S?~i&&w[i].p(g,c):(r&&(Ke(),ae(w[S],1,1,()=>{w[S]=null}),Ye()),~i?(r=w[i],r?r.p(g,c):(r=w[i]=I[i](g),r.c()),ue(r,1),r.m(n,null)):r=null)},i(g){a||(ue(r),a=!0)},o(g){ae(r),a=!1},d(g){g&&p(e),d.d(),~i&&w[i].d()}}}function ct(l,e,t){let s="",n,i="+1",r="",a="",u="",h,d="",I=[];function w(){console.log("signInWithPhone()"),window.recaptchaVerifier||(window.recaptchaVerifier=new Je("sign-in-button",{size:"invisible",callback:M=>{console.log("reCAPTCHA solved =",M)}},ee()),n=window.recaptchaVerifier),U();function U(){const M=`${i} ${r}-${a}-${u}`;print(ee(),M,n),xe(ee(),M,n).then(F=>{console.log("confirmation result =",F),t(5,h=F),window.confirmationResult=F}).catch(F=>{alert(F),console.log("error =",F),window.recaptchaVerifier.render().then(function(Z){grecaptcha.reset(Z)})})}}function y(){console.log("phoneConfirmCode =",d),window.confirmationResult.confirm(d).then(U=>{}).catch(U=>{alert(U)})}const g=ee();let c=null,S="",N=[],f=!1;const D=Te(q,"users");Pe(D).then(U=>{U.docs.forEach(M=>{N.push(me({uid:M.id},M.data()))})});async function v({name:U,uid:M}){for(const Q of c.friends)if(Q.uid===M){alert("You're already friends"),t(10,f=!1);return}const F=J(q,"users",c.uid);console.log("name, uid =",U,M),await X(F,{friends:re({name:U,uid:M})});const Z=J(q,"chats",tt());await _e(Z,{participantUIDs:[M,c.uid],messages:[]}),t(10,f=!1)}Ze(g,async U=>{if(U){const M=J(q,"users",U.uid),F=await Se(M);if(F.exists())t(8,c=F.data());else{const Z={uid:U.uid,name:U.displayName||"John Apple",phoneNumber:U.phoneNumber,friends:[],family:[],VIPs:[],everyoneElse:[]};await _e(J(q,"users",U.uid),Z),t(8,c=Z)}Ce(J(q,"users",U.uid),Z=>{t(8,c=Z.data()),c.friendUIDsWithNewMessages&&t(7,I=c.friendUIDsWithNewMessages)})}});async function b(){await X(J(q,"users",c.uid),{name:s}),t(3,s=""),alert("successfully updated")}function B(){i=this.value,t(4,i)}function o(){r=this.value,t(0,r)}function z(){a=this.value,t(1,a)}function V(){u=this.value,t(2,u)}function Y(){d=this.value,t(6,d)}const j=U=>t(9,S=U.uid),G=()=>t(10,f=!0),x=U=>v(U);function $(){s=this.value,t(3,s)}return l.$$.update=()=>{l.$$.dirty[0]&1&&r.length===3&&document.getElementById("phone-input-2").focus(),l.$$.dirty[0]&2&&a.length===3&&document.getElementById("phone-input-3").focus(),l.$$.dirty[0]&4&&u.length===4&&w()},[r,a,u,s,i,h,d,I,c,S,f,w,y,N,v,b,B,o,z,V,Y,j,G,x,$]}class mt extends Ue{constructor(e){super();Ve(this,e,ct,ht,Me,{},null,[-1,-1])}}export{mt as default};
