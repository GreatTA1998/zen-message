var be=Object.defineProperty;var le=Object.getOwnPropertySymbols;var Ee=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable;var ne=(i,e,t)=>e in i?be(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,se=(i,e)=>{for(var t in e||(e={}))Ee.call(e,t)&&ne(i,t,e[t]);if(le)for(var t of le(e))De.call(e,t)&&ne(i,t,e[t]);return i};import{L as we,M as Ue,S as he,i as _e,s as pe,e as I,t as U,k as A,c as k,a as E,h as V,d as u,m as S,f as K,b as Ve,g as D,J as h,N as ie,O as R,j as me,K as Y,P as Ae,Q as ve,R as Se,T as Te,U as ge,V as W,W as Ie,X as ke,w as Ne,x as Fe,y as Pe,q as $,o as J,B as je,p as Me,Y as Q,Z as Ce,_ as Oe,n as ze,$ as Be,a0 as He,a1 as Re,l as ae,a2 as ye}from"../chunks/vendor-09cd1ae3.js";const qe={apiKey:"AIzaSyCMj9SsNMKDI9EezOzg_jowsYUOfaCbivc",authDomain:"project-z-e00fd.firebaseapp.com",projectId:"project-z-e00fd",storageBucket:"project-z-e00fd.appspot.com",messagingSenderId:"37588438028",appId:"1:37588438028:web:82c870a2fe6af985d67229",measurementId:"G-W20KMPGM93"};we(qe);var H=Ue();function Ke(i){let e,t,l,n,a,o,_,c,r,p,d,y,P,O,f,w,T,j,M,b,g,s,v,m,z,B,q;return{c(){e=I("div"),t=I("h1"),l=U("Chat: "),n=U(i[0]),a=A(),o=I("input"),_=A(),c=I("button"),r=U("Send"),p=A(),d=I("div"),y=I("div"),P=U("ASAP"),O=A(),f=I("div"),w=U("1 hour"),T=A(),j=I("div"),M=U("Today"),b=A(),g=I("div"),s=U("This week"),v=A(),m=I("div"),z=U("Anytime"),this.h()},l(N){e=k(N,"DIV",{});var F=E(e);t=k(F,"H1",{});var G=E(t);l=V(G,"Chat: "),n=V(G,i[0]),G.forEach(u),a=S(F),o=k(F,"INPUT",{style:!0,placeholder:!0}),_=S(F),c=k(F,"BUTTON",{});var L=E(c);r=V(L,"Send"),L.forEach(u),p=S(F),d=k(F,"DIV",{style:!0});var C=E(d);y=k(C,"DIV",{});var X=E(y);P=V(X,"ASAP"),X.forEach(u),O=S(C),f=k(C,"DIV",{});var Z=E(f);w=V(Z,"1 hour"),Z.forEach(u),T=S(C),j=k(C,"DIV",{});var x=E(j);M=V(x,"Today"),x.forEach(u),b=S(C),g=k(C,"DIV",{});var ee=E(g);s=V(ee,"This week"),ee.forEach(u),v=S(C),m=k(C,"DIV",{});var te=E(m);z=V(te,"Anytime"),te.forEach(u),C.forEach(u),F.forEach(u),this.h()},h(){K(o,"width","100%"),Ve(o,"placeholder","Type message here..."),K(d,"display","flex"),K(d,"justify-content","space-evenly")},m(N,F){D(N,e,F),h(e,t),h(t,l),h(t,n),h(e,a),h(e,o),ie(o,i[1]),h(e,_),h(e,c),h(c,r),h(e,p),h(e,d),h(d,y),h(y,P),h(d,O),h(d,f),h(f,w),h(d,T),h(d,j),h(j,M),h(d,b),h(d,g),h(g,s),h(d,v),h(d,m),h(m,z),B||(q=[R(o,"input",i[4]),R(c,"click",i[2])],B=!0)},p(N,[F]){F&1&&me(n,N[0]),F&2&&o.value!==N[1]&&ie(o,N[1])},i:Y,o:Y,d(N){N&&u(e),B=!1,Ae(q)}}}function We(i,e,t){let{friendUID:l}=e,n,a,o;function _(){alert("Send message, chat ID ="+a),console.log("new message =",o);const r=W(H,"chats",a);Ie(r,{messages:ke()})}function c(){o=this.value,t(1,o)}return i.$$set=r=>{"friendUID"in r&&t(0,l=r.friendUID)},i.$$.update=()=>{if(i.$$.dirty&9&&l){const r=ve(H,"chats"),p=Se(r,Te("participantUIDs","array-contains",l));ge(p).then(d=>{console.log("result =",d),d.docs.forEach(y=>{console.log("doc =",y),a=y.id,t(3,n=y.data().messages),console.log("allMessages =",n)})})}},[l,o,_,n,c]}class $e extends he{constructor(e){super();_e(this,e,We,Ke,pe,{friendUID:0})}}function oe(i,e,t){const l=i.slice();return l[16]=e[t],l}function re(i,e,t){const l=i.slice();return l[19]=e[t],l}function Ge(i){let e,t,l,n,a,o,_,c,r,p,d,y,P,O,f,w,T,j,M=i[0].friends,b=[];for(let s=0;s<M.length;s+=1)b[s]=ce(re(i,M,s));let g=i[2]&&fe(i);return{c(){e=I("h2"),t=U("Friends"),l=A();for(let s=0;s<b.length;s+=1)b[s].c();n=A(),a=I("button"),o=U("Add new friend"),_=A(),g&&g.c(),c=A(),r=I("h2"),p=U("Family"),d=A(),y=I("h2"),P=U("Other VIPs"),O=A(),f=I("h2"),w=U("Everyone else")},l(s){e=k(s,"H2",{});var v=E(e);t=V(v,"Friends"),v.forEach(u),l=S(s);for(let N=0;N<b.length;N+=1)b[N].l(s);n=S(s),a=k(s,"BUTTON",{});var m=E(a);o=V(m,"Add new friend"),m.forEach(u),_=S(s),g&&g.l(s),c=S(s),r=k(s,"H2",{});var z=E(r);p=V(z,"Family"),z.forEach(u),d=S(s),y=k(s,"H2",{});var B=E(y);P=V(B,"Other VIPs"),B.forEach(u),O=S(s),f=k(s,"H2",{});var q=E(f);w=V(q,"Everyone else"),q.forEach(u)},m(s,v){D(s,e,v),h(e,t),D(s,l,v);for(let m=0;m<b.length;m+=1)b[m].m(s,v);D(s,n,v),D(s,a,v),h(a,o),D(s,_,v),g&&g.m(s,v),D(s,c,v),D(s,r,v),h(r,p),D(s,d,v),D(s,y,v),h(y,P),D(s,O,v),D(s,f,v),h(f,w),T||(j=R(a,"click",i[7]),T=!0)},p(s,v){if(v&3){M=s[0].friends;let m;for(m=0;m<M.length;m+=1){const z=re(s,M,m);b[m]?b[m].p(z,v):(b[m]=ce(z),b[m].c(),b[m].m(n.parentNode,n))}for(;m<b.length;m+=1)b[m].d(1);b.length=M.length}s[2]?g?g.p(s,v):(g=fe(s),g.c(),g.m(c.parentNode,c)):g&&(g.d(1),g=null)},d(s){s&&u(e),s&&u(l),ye(b,s),s&&u(n),s&&u(a),s&&u(_),g&&g.d(s),s&&u(c),s&&u(r),s&&u(d),s&&u(y),s&&u(O),s&&u(f),T=!1,j()}}}function Qe(i){let e,t,l,n;return{c(){e=I("button"),t=U("Sign up")},l(a){e=k(a,"BUTTON",{});var o=E(e);t=V(o,"Sign up"),o.forEach(u)},m(a,o){D(a,e,o),h(e,t),l||(n=R(e,"click",i[5]),l=!0)},p:Y,d(a){a&&u(e),l=!1,n()}}}function ce(i){let e,t=i[19].name+"",l,n,a;function o(){return i[6](i[19])}return{c(){e=I("div"),l=U(t)},l(_){e=k(_,"DIV",{});var c=E(e);l=V(c,t),c.forEach(u)},m(_,c){D(_,e,c),h(e,l),n||(a=R(e,"click",o),n=!0)},p(_,c){i=_,c&1&&t!==(t=i[19].name+"")&&me(l,t)},d(_){_&&u(e),n=!1,a()}}}function fe(i){let e,t=i[3],l=[];for(let n=0;n<t.length;n+=1)l[n]=de(oe(i,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=ae()},l(n){for(let a=0;a<l.length;a+=1)l[a].l(n);e=ae()},m(n,a){for(let o=0;o<l.length;o+=1)l[o].m(n,a);D(n,e,a)},p(n,a){if(a&24){t=n[3];let o;for(o=0;o<t.length;o+=1){const _=oe(n,t,o);l[o]?l[o].p(_,a):(l[o]=de(_),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=t.length}},d(n){ye(l,n),n&&u(e)}}}function de(i){let e,t=i[16].name+"",l,n,a,o;function _(){return i[8](i[16])}return{c(){e=I("div"),l=U(t),n=A()},l(c){e=k(c,"DIV",{});var r=E(e);l=V(r,t),n=S(r),r.forEach(u)},m(c,r){D(c,e,r),h(e,l),h(e,n),a||(o=R(e,"click",_),a=!0)},p(c,r){i=c},d(c){c&&u(e),a=!1,o()}}}function ue(i){let e,t;return e=new $e({props:{friendUID:i[1]}}),{c(){Ne(e.$$.fragment)},l(l){Fe(e.$$.fragment,l)},m(l,n){Pe(e,l,n),t=!0},p(l,n){const a={};n&2&&(a.friendUID=l[1]),e.$set(a)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){J(e.$$.fragment,l),t=!1},d(l){je(e,l)}}}function Ye(i){let e,t,l,n,a;function o(p,d){return p[0]?Ge:Qe}let _=o(i),c=_(i),r=i[1]&&ue(i);return{c(){e=I("div"),t=I("div"),c.c(),l=A(),n=I("div"),r&&r.c(),this.h()},l(p){e=k(p,"DIV",{style:!0});var d=E(e);t=k(d,"DIV",{});var y=E(t);c.l(y),y.forEach(u),l=S(d),n=k(d,"DIV",{});var P=E(n);r&&r.l(P),P.forEach(u),d.forEach(u),this.h()},h(){K(e,"display","flex")},m(p,d){D(p,e,d),h(e,t),c.m(t,null),h(e,l),h(e,n),r&&r.m(n,null),a=!0},p(p,[d]){_===(_=o(p))&&c?c.p(p,d):(c.d(1),c=_(p),c&&(c.c(),c.m(t,null))),p[1]?r?(r.p(p,d),d&2&&$(r,1)):(r=ue(p),r.c(),$(r,1),r.m(n,null)):r&&(ze(),J(r,1,1,()=>{r=null}),Me())},i(p){a||($(r),a=!0)},o(p){J(r),a=!1},d(p){p&&u(e),c.d(),r&&r.d()}}}function Je(i,e,t){const l=new Q,n=Ce();let a=null,o="",_=[],c=!1;const r=ve(H,"users");ge(r).then(f=>{f.docs.forEach(w=>{_.push(se({uid:w.id},w.data()))}),console.log("accounts =",_)});async function p({name:f,uid:w}){const T=W(H,"users",a.uid);console.log("name, uid =",f,w),await Ie(T,{friends:ke({name:f,uid:w})}),alert("added friend successfully"),t(2,c=!1)}Oe(n,async f=>{if(f){console.log("auth user =",f);const w=W(H,"users",f.uid),T=await Be(w);if(T.exists())console.log("Document data:",T.data()),t(0,a=T.data());else{console.log("No such document!");const j={uid:f.uid,name:f.displayName,friends:[],family:[],VIPs:[],everyoneElse:[]};await He(W(H,"users",f.uid),j),t(0,a=j)}console.log("currentUser =",a)}});function d(){Re(n,l).then(f=>{alert(f),Q.credentialFromResult(f).accessToken,f.user}).catch(f=>{alert(f),f.code,f.message,f.email,Q.credentialFromError(f)})}return[a,o,c,_,p,d,f=>t(1,o=f.uid),()=>t(2,c=!0),f=>p(f)]}class Ze extends he{constructor(e){super();_e(this,e,Je,Ye,pe,{})}}export{Ze as default};
