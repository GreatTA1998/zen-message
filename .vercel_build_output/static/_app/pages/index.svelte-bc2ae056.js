var Be=Object.defineProperty;var me=Object.getOwnPropertySymbols;var Ae=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable;var _e=(o,e,t)=>e in o?Be(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,ge=(o,e)=>{for(var t in e||(e={}))Ae.call(e,t)&&_e(o,t,e[t]);if(me)for(var t of me(e))Oe.call(e,t)&&_e(o,t,e[t]);return o};import{L as je,M as He,S as Ce,i as Pe,s as pe,l as Z,g as U,e as w,k as P,c as k,a as M,m as S,d as f,f as c,J as g,N as fe,t as z,h as R,b as V,O as ae,P as j,Q as L,K as te,R as ce,T as Le,U as Fe,v as qe,V as Se,W as J,X as ee,Y as Ye,Z as he,_ as ze,$ as Ke,j as Q,o as ie,p as Re,q as le,a0 as re,a1 as Je,a2 as Ze,a3 as Ge,n as We,a4 as Qe,a5 as Xe,a6 as ye,w as xe,x as $e,y as et,B as tt}from"../chunks/vendor-5e8b3037.js";const it={apiKey:"AIzaSyCMj9SsNMKDI9EezOzg_jowsYUOfaCbivc",authDomain:"project-z-e00fd.firebaseapp.com",projectId:"project-z-e00fd",storageBucket:"project-z-e00fd.appspot.com",messagingSenderId:"37588438028",appId:"1:37588438028:web:82c870a2fe6af985d67229",measurementId:"G-W20KMPGM93"};je(it);var Y=He();const ue=function(o,e={month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"utc"}){const t=new Date(o);let l=t.getTimezoneOffset()*6e4;return new Date(t-l).toLocaleDateString("en-US",e)};function ve(o,e,t){const l=o.slice();return l[16]=e[t],l}function be(o,e,t){const l=o.slice();return l[19]=e[t],l}function we(o){let e,t=o[4].messages,l=[];for(let n=0;n<t.length;n+=1)l[n]=ke(be(o,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=Z()},l(n){for(let i=0;i<l.length;i+=1)l[i].l(n);e=Z()},m(n,i){for(let s=0;s<l.length;s+=1)l[s].m(n,i);U(n,e,i)},p(n,i){if(i&17){t=n[4].messages;let s;for(s=0;s<t.length;s+=1){const u=be(n,t,s);l[s]?l[s].p(u,i):(l[s]=ke(u),l[s].c(),l[s].m(e.parentNode,e))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(n){fe(l,n),n&&f(e)}}}function lt(o){let e,t=o[19].content+"",l,n,i,s=" "+ue(o[19].timestamp),u;return{c(){e=w("p"),l=z(t),n=P(),i=w("p"),u=z(s),this.h()},l(a){e=k(a,"P",{style:!0});var r=M(e);l=R(r,t),r.forEach(f),n=S(a),i=k(a,"P",{style:!0});var h=M(i);u=R(h,s),h.forEach(f),this.h()},h(){c(e,"margin-right","4px"),c(e,"margin-left","0"),c(e,"margin-bottom","4px"),c(i,"font-size","0.8rem"),c(i,"color","grey"),c(i,"margin-left","0"),c(i,"margin-right","auto"),c(i,"margin-top","18px")},m(a,r){U(a,e,r),g(e,l),U(a,n,r),U(a,i,r),g(i,u)},p(a,r){r&16&&t!==(t=a[19].content+"")&&Q(l,t),r&16&&s!==(s=" "+ue(a[19].timestamp))&&Q(u,s)},d(a){a&&f(e),a&&f(n),a&&f(i)}}}function nt(o){let e,t=o[19].content+"",l,n,i,s=" "+ue(o[19].timestamp),u;return{c(){e=w("p"),l=z(t),n=P(),i=w("p"),u=z(s),this.h()},l(a){e=k(a,"P",{style:!0});var r=M(e);l=R(r,t),r.forEach(f),n=S(a),i=k(a,"P",{style:!0});var h=M(i);u=R(h,s),h.forEach(f),this.h()},h(){c(e,"margin-left","auto"),c(e,"margin-right","0"),c(e,"margin-bottom","4px"),c(i,"font-size","0.8rem"),c(i,"color","grey"),c(i,"margin-left","4px"),c(i,"margin-bottom","0px"),c(i,"margin-top","18px")},m(a,r){U(a,e,r),g(e,l),U(a,n,r),U(a,i,r),g(i,u)},p(a,r){r&16&&t!==(t=a[19].content+"")&&Q(l,t),r&16&&s!==(s=" "+ue(a[19].timestamp))&&Q(u,s)},d(a){a&&f(e),a&&f(n),a&&f(i)}}}function ke(o){let e,t;function l(s,u){return s[19].authorUID===s[0].uid?nt:lt}let n=l(o),i=n(o);return{c(){e=w("div"),i.c(),t=P(),this.h()},l(s){e=k(s,"DIV",{style:!0});var u=M(e);i.l(u),t=S(u),u.forEach(f),this.h()},h(){c(e,"display","flex"),c(e,"width","410px")},m(s,u){U(s,e,u),i.m(e,null),g(e,t)},p(s,u){n===(n=l(s))&&i?i.p(s,u):(i.d(1),i=n(s),i&&(i.c(),i.m(e,t)))},d(s){s&&f(e),i.d()}}}function Ie(o){let e,t=o[16]+"",l,n,i,s;function u(){return o[11](o[16])}return{c(){e=w("div"),l=z(t),n=P(),this.h()},l(a){e=k(a,"DIV",{class:!0,style:!0});var r=M(e);l=R(r,t),n=S(r),r.forEach(f),this.h()},h(){V(e,"class","clickable-option svelte-tz8lu4"),c(e,"margin-left","20px"),ae(e,"highlighted-box",o[3]===o[16])},m(a,r){U(a,e,r),g(e,l),g(e,n),i||(s=j(e,"click",u),i=!0)},p(a,r){o=a,r&40&&ae(e,"highlighted-box",o[3]===o[16])},d(a){a&&f(e),i=!1,s()}}}function st(o){let e,t,l,n,i,s,u,a,r,h,I,E,b,p=o[4].messages&&we(o),T=o[5],v=[];for(let m=0;m<T.length;m+=1)v[m]=Ie(ve(o,T,m));return{c(){e=w("div"),p&&p.c(),t=P(),l=w("input"),n=P(),i=w("div"),s=w("div"),u=z("Want reply:"),a=P();for(let m=0;m<v.length;m+=1)v[m].c();r=P(),h=w("button"),I=z("Send message"),this.h()},l(m){e=k(m,"DIV",{style:!0});var y=M(e);p&&p.l(y),t=S(y),l=k(y,"INPUT",{style:!0,placeholder:!0}),n=S(y),i=k(y,"DIV",{style:!0});var _=M(i);s=k(_,"DIV",{style:!0});var d=M(s);u=R(d,"Want reply:"),d.forEach(f),a=S(_);for(let C=0;C<v.length;C+=1)v[C].l(_);_.forEach(f),r=S(y),h=k(y,"BUTTON",{style:!0});var D=M(h);I=R(D,"Send message"),D.forEach(f),y.forEach(f),this.h()},h(){c(l,"width","405px"),c(l,"box-sizing","border-box"),V(l,"placeholder","Type message here..."),c(s,"color","grey"),c(i,"display","flex"),c(i,"margin-top","10px"),c(i,"align-items","center"),c(h,"margin-top","12px"),c(h,"height","30px"),c(h,"width","405px"),c(e,"width","410px")},m(m,y){U(m,e,y),p&&p.m(e,null),g(e,t),g(e,l),L(l,o[2]),o[10](l),g(e,n),g(e,i),g(i,s),g(s,u),g(i,a);for(let _=0;_<v.length;_+=1)v[_].m(i,null);g(e,r),g(e,h),g(h,I),E||(b=[j(l,"input",o[9]),j(h,"click",o[6])],E=!0)},p(m,[y]){if(m[4].messages?p?p.p(m,y):(p=we(m),p.c(),p.m(e,t)):p&&(p.d(1),p=null),y&4&&l.value!==m[2]&&L(l,m[2]),y&40){T=m[5];let _;for(_=0;_<T.length;_+=1){const d=ve(m,T,_);v[_]?v[_].p(d,y):(v[_]=Ie(d),v[_].c(),v[_].m(i,null))}for(;_<v.length;_+=1)v[_].d(1);v.length=T.length}},i:te,o:te,d(m){m&&f(e),p&&p.d(),o[10](null),fe(v,m),E=!1,ce(b)}}}function ot(o,e,t){let{friendUID:l}=e,{currentUser:n}=e,{chatRoomID:i}=e;const s=Le(),u=Fe(s,"sendTextMessage");let a,r,h=["real-time","today","this week","any time"],I="any time",E={messages:[]};qe(()=>{a.focus(),Se(J(Y,"chats",i),m=>{if(console.log("Current data: ",m.data()),m.data()){t(4,E=m.data());const y=J(Y,"users",n.uid);ee(y,{friendUIDsWithNewMessages:Ye(i)})}})});async function b(){console.log("sendMessage()");const m=J(Y,"chats",i);ee(m,{messages:he({content:r,timestamp:Date.now(),authorUID:n.uid})});const y=J(Y,"users",l);ee(y,{friendUIDsWithNewMessages:he(i)});const _=await ze(y);switch(I){case"any time":break;case"real-time":console.log("sending text to ,",_.data().phoneNumber),u({content:`${n.name} wrote "${r}"`,toWho:_.data().phoneNumber})}t(2,r="")}function p(){r=this.value,t(2,r)}function T(m){Ke[m?"unshift":"push"](()=>{a=m,t(1,a)})}const v=m=>t(3,I=m);return o.$$set=m=>{"friendUID"in m&&t(7,l=m.friendUID),"currentUser"in m&&t(0,n=m.currentUser),"chatRoomID"in m&&t(8,i=m.chatRoomID)},[n,a,r,I,E,h,b,l,i,p,T,v]}class rt extends Ce{constructor(e){super();Pe(this,e,ot,st,pe,{friendUID:7,currentUser:0,chatRoomID:8})}}function De(o,e,t){const l=o.slice();return l[33]=e[t],l}function Ee(o,e,t){const l=o.slice();return l[36]=e[t],l}function at(o){let e,t,l,n,i,s,u,a,r,h,I,E,b,p,T,v,m=o[4].friends,y=[];for(let d=0;d<m.length;d+=1)y[d]=Ue(Ee(o,m,d));let _=o[11]&&Ne(o);return{c(){e=w("h2"),t=z("People"),l=P();for(let d=0;d<y.length;d+=1)y[d].c();n=P(),i=w("button"),s=z("Add person"),u=P(),_&&_.c(),a=P(),r=w("h2"),h=z("Editable category"),I=z(`
      Coming soon...

      `),E=w("h2"),b=z("Everyone else"),p=z(`
      No new message requests yet...`),this.h()},l(d){e=k(d,"H2",{class:!0});var D=M(e);t=R(D,"People"),D.forEach(f),l=S(d);for(let B=0;B<y.length;B+=1)y[B].l(d);n=S(d),i=k(d,"BUTTON",{style:!0});var C=M(i);s=R(C,"Add person"),C.forEach(f),u=S(d),_&&_.l(d),a=S(d),r=k(d,"H2",{class:!0,style:!0});var W=M(r);h=R(W,"Editable category"),W.forEach(f),I=R(d,`
      Coming soon...

      `),E=k(d,"H2",{class:!0,style:!0});var G=M(E);b=R(G,"Everyone else"),G.forEach(f),p=R(d,`
      No new message requests yet...`),this.h()},h(){V(e,"class","message-group-title svelte-ewe8mg"),c(i,"margin-top","20px"),V(r,"class","message-group-title svelte-ewe8mg"),c(r,"margin-top","50px"),V(E,"class","message-group-title svelte-ewe8mg"),c(E,"margin-top","50px")},m(d,D){U(d,e,D),g(e,t),U(d,l,D);for(let C=0;C<y.length;C+=1)y[C].m(d,D);U(d,n,D),U(d,i,D),g(i,s),U(d,u,D),_&&_.m(d,D),U(d,a,D),U(d,r,D),g(r,h),U(d,I,D),U(d,E,D),g(E,b),U(d,p,D),T||(v=j(i,"click",o[23]),T=!0)},p(d,D){if(D[0]&1072){m=d[4].friends;let C;for(C=0;C<m.length;C+=1){const W=Ee(d,m,C);y[C]?y[C].p(W,D):(y[C]=Ue(W),y[C].c(),y[C].m(n.parentNode,n))}for(;C<y.length;C+=1)y[C].d(1);y.length=m.length}d[11]?_?_.p(d,D):(_=Ne(d),_.c(),_.m(a.parentNode,a)):_&&(_.d(1),_=null)},d(d){d&&f(e),d&&f(l),fe(y,d),d&&f(n),d&&f(i),d&&f(u),_&&_.d(d),d&&f(a),d&&f(r),d&&f(I),d&&f(E),d&&f(p),T=!1,v()}}}function ut(o){let e;function t(i,s){return i[8]?ft:ct}let l=t(o),n=l(o);return{c(){n.c(),e=Z()},l(i){n.l(i),e=Z()},m(i,s){n.m(i,s),U(i,e,s)},p(i,s){l===(l=t(i))&&n?n.p(i,s):(n.d(1),n=l(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){n.d(i),i&&f(e)}}}function Ue(o){let e,t,l=o[36].name+"",n,i=o[10].includes(o[36].uid)?"New messages":"",s,u,a;function r(){return o[22](o[36])}return{c(){e=w("div"),t=w("span"),n=z(l),s=z(i),this.h()},l(h){e=k(h,"DIV",{style:!0,class:!0});var I=M(e);t=k(I,"SPAN",{style:!0,class:!0});var E=M(t);n=R(E,l),s=R(E,i),E.forEach(f),I.forEach(f),this.h()},h(){c(t,"margin-left","5px"),V(t,"class","svelte-ewe8mg"),c(e,"border","solid orange"),c(e,"height","40px"),c(e,"display","flex"),c(e,"align-items","center"),V(e,"class","svelte-ewe8mg"),ae(e,"highlighted-box",o[36].uid===o[5])},m(h,I){U(h,e,I),g(e,t),g(t,n),g(t,s),u||(a=j(e,"click",r),u=!0)},p(h,I){o=h,I[0]&16&&l!==(l=o[36].name+"")&&Q(n,l),I[0]&1040&&i!==(i=o[10].includes(o[36].uid)?"New messages":"")&&Q(s,i),I[0]&48&&ae(e,"highlighted-box",o[36].uid===o[5])},d(h){h&&f(e),u=!1,a()}}}function Ne(o){let e,t,l,n,i=o[14],s=[];for(let u=0;u<i.length;u+=1)s[u]=Me(De(o,i,u));return{c(){e=w("div"),t=z("Here are all accounts:"),l=P();for(let u=0;u<s.length;u+=1)s[u].c();n=Z()},l(u){e=k(u,"DIV",{});var a=M(e);t=R(a,"Here are all accounts:"),a.forEach(f),l=S(u);for(let r=0;r<s.length;r+=1)s[r].l(u);n=Z()},m(u,a){U(u,e,a),g(e,t),U(u,l,a);for(let r=0;r<s.length;r+=1)s[r].m(u,a);U(u,n,a)},p(u,a){if(a[0]&49168){i=u[14];let r;for(r=0;r<i.length;r+=1){const h=De(u,i,r);s[r]?s[r].p(h,a):(s[r]=Me(h),s[r].c(),s[r].m(n.parentNode,n))}for(;r<s.length;r+=1)s[r].d(1);s.length=i.length}},d(u){u&&f(e),u&&f(l),fe(s,u),u&&f(n)}}}function Te(o){let e,t,l=o[33].name+"",n,i,s,u;function a(){return o[24](o[33])}return{c(){e=w("div"),t=w("button"),n=z(l),i=P(),this.h()},l(r){e=k(r,"DIV",{style:!0});var h=M(e);t=k(h,"BUTTON",{style:!0});var I=M(t);n=R(I,l),I.forEach(f),i=S(h),h.forEach(f),this.h()},h(){c(t,"margin-left","20px"),c(e,"margin-top","10px")},m(r,h){U(r,e,h),g(e,t),g(t,n),g(e,i),s||(u=j(t,"click",a),s=!0)},p(r,h){o=r},d(r){r&&f(e),s=!1,u()}}}function Me(o){let e,t=o[33].uid!==o[4].uid&&Te(o);return{c(){t&&t.c(),e=Z()},l(l){t&&t.l(l),e=Z()},m(l,n){t&&t.m(l,n),U(l,e,n)},p(l,n){l[33].uid!==l[4].uid?t?t.p(l,n):(t=Te(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){t&&t.d(l),l&&f(e)}}}function ft(o){let e,t,l,n,i,s,u;return{c(){e=w("div"),t=w("input"),l=P(),n=w("button"),i=z("Confirm code"),this.h()},l(a){e=k(a,"DIV",{style:!0});var r=M(e);t=k(r,"INPUT",{label:!0,placeholder:!0}),l=S(r),n=k(r,"BUTTON",{});var h=M(n);i=R(h,"Confirm code"),h.forEach(f),r.forEach(f),this.h()},h(){V(t,"label","6-digit code"),V(t,"placeholder","123456"),c(e,"display","flex")},m(a,r){U(a,e,r),g(e,t),L(t,o[9]),g(e,l),g(e,n),g(n,i),s||(u=[j(t,"input",o[21]),j(n,"click",o[13])],s=!0)},p(a,r){r[0]&512&&t.value!==a[9]&&L(t,a[9])},d(a){a&&f(e),s=!1,ce(u)}}}function ct(o){let e,t,l,n,i,s,u,a,r,h,I,E,b,p,T,v,m,y,_,d,D,C,W,G,B,X,q,x,$,ne;return{c(){e=w("div"),t=w("b"),l=z("What problem does this solve:"),n=z(`
          Everytime someone messages us, we get a notification IMMEDIATELY, regardless of whether the message is time-sensitive, or even important. 
          Even if you try to ignore it, visually they go to the top of our chat list; 
          if you visited Messenger for a specific purpose, the top message distractions will help you forget what you were doing.
          Multiply that by all the people you message across time, and it's a disaster . 

          `),i=w("br"),s=w("br"),u=P(),a=w("b"),r=z("How this app differs"),h=P(),I=w("ol"),E=w("li"),b=z(`Messages have no notifications by default unless the other person specifies it's time-sensitive e.g. "Before today" / "This week"`),p=P(),T=w("li"),v=z("Left-side is organized intentionally - NOT by whoever messaged you most recently"),m=P(),y=w("div"),_=w("input"),d=P(),D=w("input"),C=P(),W=w("input"),G=P(),B=w("input"),X=P(),q=w("div"),x=z("Sign Up"),this.h()},l(O){e=k(O,"DIV",{style:!0});var N=M(e);t=k(N,"B",{});var A=M(t);l=R(A,"What problem does this solve:"),A.forEach(f),n=R(N,`
          Everytime someone messages us, we get a notification IMMEDIATELY, regardless of whether the message is time-sensitive, or even important. 
          Even if you try to ignore it, visually they go to the top of our chat list; 
          if you visited Messenger for a specific purpose, the top message distractions will help you forget what you were doing.
          Multiply that by all the people you message across time, and it's a disaster . 

          `),i=k(N,"BR",{}),s=k(N,"BR",{}),u=S(N),a=k(N,"B",{});var H=M(a);r=R(H,"How this app differs"),H.forEach(f),h=S(N),I=k(N,"OL",{});var F=M(I);E=k(F,"LI",{});var se=M(E);b=R(se,`Messages have no notifications by default unless the other person specifies it's time-sensitive e.g. "Before today" / "This week"`),se.forEach(f),p=S(F),T=k(F,"LI",{});var oe=M(T);v=R(oe,"Left-side is organized intentionally - NOT by whoever messaged you most recently"),oe.forEach(f),F.forEach(f),N.forEach(f),m=S(O),y=k(O,"DIV",{style:!0});var K=M(y);_=k(K,"INPUT",{type:!0,id:!0,minlength:!0,maxlength:!0,placeholder:!0,style:!0}),d=S(K),D=k(K,"INPUT",{type:!0,id:!0,minlength:!0,maxlength:!0,placeholder:!0,style:!0}),C=S(K),W=k(K,"INPUT",{type:!0,id:!0,minlength:!0,maxlength:!0,placeholder:!0,style:!0}),G=S(K),B=k(K,"INPUT",{type:!0,id:!0,minlength:!0,maxlength:!0,placeholder:!0,style:!0}),X=S(K),q=k(K,"DIV",{id:!0,style:!0});var de=M(q);x=R(de,"Sign Up"),de.forEach(f),K.forEach(f),this.h()},h(){c(e,"font-family","Roboto, sans-serif"),c(e,"font-size","1.5rem"),c(e,"color","grey"),c(e,"margin-top","20px"),V(_,"type","tel"),V(_,"id","phone-input-1"),V(_,"minlength","2"),V(_,"maxlength","4"),V(_,"placeholder","+1"),c(_,"width","36px"),c(_,"height","40px"),c(_,"font-size","2rem"),c(_,"margin-right","10px"),V(D,"type","tel"),V(D,"id","phone-input-1"),V(D,"minlength","3"),V(D,"maxlength","3"),V(D,"placeholder","339"),c(D,"width","54px"),c(D,"height","40px"),c(D,"font-size","2rem"),c(D,"margin-right","10px"),V(W,"type","tel"),V(W,"id","phone-input-2"),V(W,"minlength","3"),V(W,"maxlength","3"),V(W,"placeholder","676"),c(W,"width","54px"),c(W,"height","40px"),c(W,"font-size","2rem"),c(W,"margin-right","10px"),V(B,"type","tel"),V(B,"id","phone-input-3"),V(B,"minlength","4"),V(B,"maxlength","4"),V(B,"placeholder","1234"),c(B,"width","76px"),c(B,"height","40px"),c(B,"font-size","2rem"),c(B,"margin-right","10px"),V(q,"id","sign-in-button"),c(q,"border","solid"),c(q,"padding","6px"),c(y,"display","flex"),c(y,"justify-content","center"),c(y,"align-items","center"),c(y,"width","400px"),c(y,"margin-top","25px")},m(O,N){U(O,e,N),g(e,t),g(t,l),g(e,n),g(e,i),g(e,s),g(e,u),g(e,a),g(a,r),g(e,h),g(e,I),g(I,E),g(E,b),g(I,p),g(I,T),g(T,v),U(O,m,N),U(O,y,N),g(y,_),L(_,o[7]),g(y,d),g(y,D),L(D,o[0]),g(y,C),g(y,W),L(W,o[1]),g(y,G),g(y,B),L(B,o[2]),g(y,X),g(y,q),g(q,x),$||(ne=[j(_,"input",o[17]),j(D,"input",o[18]),j(W,"input",o[19]),j(B,"input",o[20]),j(q,"click",o[12])],$=!0)},p(O,N){N[0]&128&&L(_,O[7]),N[0]&1&&L(D,O[0]),N[0]&2&&L(W,O[1]),N[0]&4&&L(B,O[2])},d(O){O&&f(e),O&&f(m),O&&f(y),$=!1,ce(ne)}}}function ht(o){let e,t,l,n,i,s,u,a,r,h,I,E;return{c(){e=w("div"),t=z("Click any chat on the left-side"),l=P(),n=w("div"),i=z("Set your name here"),s=P(),u=w("input"),a=P(),r=w("button"),h=z("Update name"),this.h()},l(b){e=k(b,"DIV",{style:!0});var p=M(e);t=R(p,"Click any chat on the left-side"),p.forEach(f),l=S(b),n=k(b,"DIV",{});var T=M(n);i=R(T,"Set your name here"),T.forEach(f),s=S(b),u=k(b,"INPUT",{placeholder:!0}),a=S(b),r=k(b,"BUTTON",{});var v=M(r);h=R(v,"Update name"),v.forEach(f),this.h()},h(){c(e,"margin-top","18px"),V(u,"placeholder","John Apple")},m(b,p){U(b,e,p),g(e,t),U(b,l,p),U(b,n,p),g(n,i),U(b,s,p),U(b,u,p),L(u,o[6]),U(b,a,p),U(b,r,p),g(r,h),I||(E=[j(u,"input",o[25]),j(r,"click",o[16])],I=!0)},p(b,p){p[0]&64&&u.value!==b[6]&&L(u,b[6])},i:te,o:te,d(b){b&&f(e),b&&f(l),b&&f(n),b&&f(s),b&&f(u),b&&f(a),b&&f(r),I=!1,ce(E)}}}function pt(o){let e=o[5],t,l,n=Ve(o);return{c(){n.c(),t=Z()},l(i){n.l(i),t=Z()},m(i,s){n.m(i,s),U(i,t,s),l=!0},p(i,s){s[0]&32&&pe(e,e=i[5])?(We(),ie(n,1,1,te),Re(),n=Ve(i),n.c(),le(n),n.m(t.parentNode,t)):n.p(i,s)},i(i){l||(le(n),l=!0)},o(i){ie(n),l=!1},d(i){i&&f(t),n.d(i)}}}function Ve(o){let e,t;return e=new rt({props:{chatRoomID:o[3],friendUID:o[5],otherPersonUID:o[5],currentUser:o[4]}}),{c(){xe(e.$$.fragment)},l(l){$e(e.$$.fragment,l)},m(l,n){et(e,l,n),t=!0},p(l,n){const i={};n[0]&8&&(i.chatRoomID=l[3]),n[0]&32&&(i.friendUID=l[5]),n[0]&32&&(i.otherPersonUID=l[5]),n[0]&16&&(i.currentUser=l[4]),e.$set(i)},i(l){t||(le(e.$$.fragment,l),t=!0)},o(l){ie(e.$$.fragment,l),t=!1},d(l){tt(e,l)}}}function dt(o){let e,t,l,n,i,s,u;function a(p,T){return p[4]?at:ut}let r=a(o),h=r(o);const I=[pt,ht],E=[];function b(p,T){return p[5]&&p[4]&&p[3]?0:p[4]?1:-1}return~(i=b(o))&&(s=E[i]=I[i](o)),{c(){e=w("div"),t=w("div"),h.c(),l=P(),n=w("div"),s&&s.c(),this.h()},l(p){e=k(p,"DIV",{style:!0});var T=M(e);t=k(T,"DIV",{});var v=M(t);h.l(v),v.forEach(f),l=S(T),n=k(T,"DIV",{style:!0});var m=M(n);s&&s.l(m),m.forEach(f),T.forEach(f),this.h()},h(){c(n,"width","420px"),c(n,"margin-left","20px"),c(n,"margin-top","5px"),c(e,"display","flex"),c(e,"padding-left","20px"),c(e,"padding-right","20px")},m(p,T){U(p,e,T),g(e,t),h.m(t,null),g(e,l),g(e,n),~i&&E[i].m(n,null),u=!0},p(p,T){r===(r=a(p))&&h?h.p(p,T):(h.d(1),h=r(p),h&&(h.c(),h.m(t,null)));let v=i;i=b(p),i===v?~i&&E[i].p(p,T):(s&&(We(),ie(E[v],1,1,()=>{E[v]=null}),Re()),~i?(s=E[i],s?s.p(p,T):(s=E[i]=I[i](p),s.c()),le(s,1),s.m(n,null)):s=null)},i(p){u||(le(s),u=!0)},o(p){ie(s),u=!1},d(p){p&&f(e),h.d(),~i&&E[i].d()}}}function mt(o,e,t){let l="",n,i="+1",s="",u="",a="",r,h="",I="",E=[];function b(){console.log("signInWithPhone()"),window.recaptchaVerifier||(window.recaptchaVerifier=new Qe("sign-in-button",{size:"invisible",callback:A=>{console.log("reCAPTCHA solved =",A)}},re()),n=window.recaptchaVerifier),N();function N(){const A=`${i} ${s}-${u}-${a}`;print(re(),A,n),Xe(re(),A,n).then(H=>{console.log("confirmation result =",H),t(8,r=H),window.confirmationResult=H}).catch(H=>{alert(H),console.log("error =",H),window.recaptchaVerifier.render().then(function(F){grecaptcha.reset(F)})})}}function p(){console.log("phoneConfirmCode =",h),window.confirmationResult.confirm(h).then(N=>{}).catch(N=>{alert(N)})}const T=re();let v=null,m="",y=[],_=!1;const d=Je(Y,"users");Ze(d).then(N=>{N.docs.forEach(A=>{y.push(ge({uid:A.id},A.data()))})});async function D({name:N,uid:A}){for(const oe of v.friends)if(oe.uid===A){alert("You're already friends"),t(11,_=!1);return}const H=J(Y,"users",v.uid);await ee(H,{friends:he({name:N,uid:A})});const F=v.uid<A?v.uid+A:A+v.uid,se=J(Y,"chats",F);await ye(se,{participantUIDs:[A,v.uid],messages:[]}),t(11,_=!1)}Ge(T,async N=>{if(N){const A=J(Y,"users",N.uid),H=await ze(A);if(H.exists())t(4,v=H.data());else{const F={uid:N.uid,name:N.displayName||"John Apple",phoneNumber:N.phoneNumber,friends:[],family:[],VIPs:[],everyoneElse:[]};await ye(J(Y,"users",N.uid),F),t(4,v=F)}Se(J(Y,"users",N.uid),F=>{t(4,v=F.data()),v.friendUIDsWithNewMessages&&t(10,E=v.friendUIDsWithNewMessages)})}});async function C(){await ee(J(Y,"users",v.uid),{name:l}),t(6,l=""),alert("successfully updated")}function W(){i=this.value,t(7,i)}function G(){s=this.value,t(0,s)}function B(){u=this.value,t(1,u)}function X(){a=this.value,t(2,a)}function q(){h=this.value,t(9,h)}const x=N=>t(5,m=N.uid),$=()=>t(11,_=!_),ne=N=>D(N);function O(){l=this.value,t(6,l)}return o.$$.update=()=>{o.$$.dirty[0]&56&&m&&(t(3,I=v.uid<m?v.uid+m:m+v.uid),console.log("chatRoomID =",I)),o.$$.dirty[0]&1&&s.length===3&&document.getElementById("phone-input-2").focus(),o.$$.dirty[0]&2&&u.length===3&&document.getElementById("phone-input-3").focus(),o.$$.dirty[0]&4&&a.length===4&&b()},[s,u,a,I,v,m,l,i,r,h,E,_,b,p,y,D,C,W,G,B,X,q,x,$,ne,O]}class yt extends Ce{constructor(e){super();Pe(this,e,mt,dt,pe,{},null,[-1,-1])}}export{yt as default};
