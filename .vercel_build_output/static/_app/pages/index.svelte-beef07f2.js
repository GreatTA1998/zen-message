var Ge=Object.defineProperty;var be=Object.getOwnPropertySymbols;var Ke=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable;var ye=(o,e,t)=>e in o?Ge(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,ke=(o,e)=>{for(var t in e||(e={}))Ke.call(e,t)&&ye(o,t,e[t]);if(be)for(var t of be(e))Qe.call(e,t)&&ye(o,t,e[t]);return o};import{S as qe,i as Le,s as ve,l as J,g as U,e as v,k as V,c as b,a as D,m as M,d,f as h,b as I,J as p,K as x,L as oe,t as O,h as S,M as te,N as H,O as j,P as me,Q as Xe,R as xe,v as $e,T as He,U as G,V as le,W as _e,E as et,X as ge,Y as Fe,Z as we,j as $,D as tt,o as se,p as je,q as ne,_ as lt,$ as he,a0 as it,a1 as st,a2 as nt,n as Ye,a3 as ot,a4 as rt,a5 as Ie,w as at,x as ut,y as ft,B as ct}from"../chunks/vendor-87f020b6.js";import{d as Y}from"../chunks/db-f3cf9e2e.js";const pe=function(o,e={month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",timeZone:"utc"}){const t=new Date(o);let i=t.getTimezoneOffset()*6e4;return new Date(t-i).toLocaleDateString("en-US",e)};function De(o,e,t){const i=o.slice();return i[18]=e[t],i}function Ee(o,e,t){const i=o.slice();return i[21]=e[t],i[23]=t,i}function Ne(o){let e,t=o[5].messages,i=[];for(let l=0;l<t.length;l+=1)i[l]=Ue(Ee(o,t,l));return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=J()},l(l){for(let n=0;n<i.length;n+=1)i[n].l(l);e=J()},m(l,n){for(let s=0;s<i.length;s+=1)i[s].m(l,n);U(l,e,n)},p(l,n){if(n&41){t=l[5].messages;let s;for(s=0;s<t.length;s+=1){const u=Ee(l,t,s);i[s]?i[s].p(u,n):(i[s]=Ue(u),i[s].c(),i[s].m(e.parentNode,e))}for(;s<i.length;s+=1)i[s].d(1);i.length=t.length}},d(l){oe(i,l),l&&d(e)}}}function ht(o){let e,t=o[21].content+"",i,l,n,s=" "+pe(o[21].timestamp),u;return{c(){e=v("p"),i=O(t),l=V(),n=v("p"),u=O(s),this.h()},l(a){e=b(a,"P",{style:!0,class:!0});var r=D(e);i=S(r,t),r.forEach(d),l=M(a),n=b(a,"P",{style:!0,class:!0});var m=D(n);u=S(m,s),m.forEach(d),this.h()},h(){h(e,"margin-right","4px"),h(e,"margin-left","0"),h(e,"margin-bottom","4px"),I(e,"class","svelte-l9tbzz"),h(n,"font-size","0.8rem"),h(n,"color","grey"),h(n,"margin-left","0"),h(n,"margin-right","auto"),h(n,"margin-top","18px"),I(n,"class","svelte-l9tbzz")},m(a,r){U(a,e,r),p(e,i),U(a,l,r),U(a,n,r),p(n,u)},p(a,r){r&32&&t!==(t=a[21].content+"")&&$(i,t),r&32&&s!==(s=" "+pe(a[21].timestamp))&&$(u,s)},d(a){a&&d(e),a&&d(l),a&&d(n)}}}function dt(o){let e,t=o[21].content+"",i,l,n,s=" "+pe(o[21].timestamp),u;return{c(){e=v("p"),i=O(t),l=V(),n=v("p"),u=O(s),this.h()},l(a){e=b(a,"P",{style:!0,class:!0});var r=D(e);i=S(r,t),r.forEach(d),l=M(a),n=b(a,"P",{style:!0,class:!0});var m=D(n);u=S(m,s),m.forEach(d),this.h()},h(){h(e,"margin-left","auto"),h(e,"margin-right","0"),h(e,"margin-bottom","4px"),I(e,"class","svelte-l9tbzz"),h(n,"font-size","0.7rem"),h(n,"color","grey"),h(n,"margin-left","4px"),h(n,"margin-bottom","0px"),h(n,"margin-top","18px"),I(n,"class","svelte-l9tbzz")},m(a,r){U(a,e,r),p(e,i),U(a,l,r),U(a,n,r),p(n,u)},p(a,r){r&32&&t!==(t=a[21].content+"")&&$(i,t),r&32&&s!==(s=" "+pe(a[21].timestamp))&&$(u,s)},d(a){a&&d(e),a&&d(l),a&&d(n)}}}function ze(o){let e;return{c(){e=v("div"),this.h()},l(t){e=b(t,"DIV",{class:!0}),D(e).forEach(d),this.h()},h(){I(e,"class","svelte-l9tbzz")},m(t,i){U(t,e,i),o[10](e)},p:x,d(t){t&&d(e),o[10](null)}}}function Ue(o){let e,t,i;function l(a,r){return a[21].authorUID===a[0].uid?dt:ht}let n=l(o),s=n(o),u=o[23]===o[5].messages.length-1&&ze(o);return{c(){e=v("div"),s.c(),t=V(),u&&u.c(),i=V(),this.h()},l(a){e=b(a,"DIV",{style:!0,class:!0});var r=D(e);s.l(r),t=M(r),u&&u.l(r),i=M(r),r.forEach(d),this.h()},h(){h(e,"display","flex"),h(e,"width","280px"),h(e,"margin-right","20px"),I(e,"class","svelte-l9tbzz")},m(a,r){U(a,e,r),s.m(e,null),p(e,t),u&&u.m(e,null),p(e,i)},p(a,r){n===(n=l(a))&&s?s.p(a,r):(s.d(1),s=n(a),s&&(s.c(),s.m(e,t))),a[23]===a[5].messages.length-1?u?u.p(a,r):(u=ze(a),u.c(),u.m(e,i)):u&&(u.d(1),u=null)},d(a){a&&d(e),s.d(),u&&u.d()}}}function Te(o){let e,t=o[18]+"",i,l,n,s;function u(){return o[13](o[18])}return{c(){e=v("div"),i=O(t),l=V(),this.h()},l(a){e=b(a,"DIV",{class:!0,style:!0});var r=D(e);i=S(r,t),l=M(r),r.forEach(d),this.h()},h(){I(e,"class","clickable-option svelte-l9tbzz"),h(e,"margin-left","4px"),te(e,"highlighted-box",o[1]===o[18])},m(a,r){U(a,e,r),p(e,i),p(e,l),n||(s=H(e,"click",u),n=!0)},p(a,r){o=a,r&66&&te(e,"highlighted-box",o[1]===o[18])},d(a){a&&d(e),n=!1,s()}}}function pt(o){let e,t,i,l,n,s,u,a,r,m,E,N,C,k,y=o[5].messages&&Ne(o),P=o[6],R=[];for(let c=0;c<P.length;c+=1)R[c]=Te(De(o,P,c));return{c(){e=v("div"),t=v("div"),y&&y.c(),i=V(),l=v("input"),n=V(),s=v("div"),u=v("div"),a=O("Want reply:"),r=V();for(let c=0;c<R.length;c+=1)R[c].c();m=V(),E=v("button"),N=O("Send message"),this.h()},l(c){e=b(c,"DIV",{style:!0,class:!0});var f=D(e);t=b(f,"DIV",{style:!0,class:!0});var g=D(t);y&&y.l(g),g.forEach(d),i=M(f),l=b(f,"INPUT",{style:!0,placeholder:!0,class:!0}),n=M(f),s=b(f,"DIV",{style:!0,class:!0});var _=D(s);u=b(_,"DIV",{style:!0,class:!0});var T=D(u);a=S(T,"Want reply:"),T.forEach(d),r=M(_);for(let W=0;W<R.length;W+=1)R[W].l(_);_.forEach(d),m=M(f),E=b(f,"BUTTON",{style:!0,class:!0});var w=D(E);N=S(w,"Send message"),w.forEach(d),f.forEach(d),this.h()},h(){h(t,"height","200px"),h(t,"overflow-y","auto"),h(t,"overflow-x","hidden"),I(t,"class","svelte-l9tbzz"),h(l,"width","300px"),h(l,"box-sizing","border-box"),I(l,"placeholder","Type message here..."),I(l,"class","svelte-l9tbzz"),h(u,"color","grey"),I(u,"class","svelte-l9tbzz"),h(s,"display","flex"),h(s,"margin-top","5px"),h(s,"align-items","center"),h(s,"flex-wrap","nowrap"),I(s,"class","svelte-l9tbzz"),h(E,"margin-top","12px"),h(E,"height","30px"),h(E,"width","300px"),I(E,"class","svelte-l9tbzz"),h(e,"width","300px"),I(e,"class","svelte-l9tbzz")},m(c,f){U(c,e,f),p(e,t),y&&y.m(t,null),p(e,i),p(e,l),j(l,o[4]),o[12](l),p(e,n),p(e,s),p(s,u),p(u,a),p(s,r);for(let g=0;g<R.length;g+=1)R[g].m(s,null);p(e,m),p(e,E),p(E,N),C||(k=[H(l,"input",o[11]),H(E,"click",o[7])],C=!0)},p(c,[f]){if(c[5].messages?y?y.p(c,f):(y=Ne(c),y.c(),y.m(t,null)):y&&(y.d(1),y=null),f&16&&l.value!==c[4]&&j(l,c[4]),f&66){P=c[6];let g;for(g=0;g<P.length;g+=1){const _=De(c,P,g);R[g]?R[g].p(_,f):(R[g]=Te(_),R[g].c(),R[g].m(s,null))}for(;g<R.length;g+=1)R[g].d(1);R.length=P.length}},i:x,o:x,d(c){c&&d(e),y&&y.d(),o[12](null),oe(R,c),C=!1,me(k)}}}function mt(o,e){if(e||(e=100),o){var t=document.createElement("input");t.style.position="absolute",t.style.top=o.offsetTop+7+"px",t.style.left=o.offsetLeft+"px",t.style.height=0,t.style.opacity=0,document.body.appendChild(t),t.focus(),setTimeout(function(){o.focus(),o.click(),document.body.removeChild(t)},e)}}function _t(o,e,t){let{friendUID:i}=e,{chatRoomID:l}=e,{currentUser:n}=e;const s=Xe(),u=xe(s,"sendTextMessage");let a,r,m,E=["now","today","any time"],N="any time",C={messages:[]};$e(()=>{He(G(Y,"chats",l),async f=>{if(console.log("Current data: ",f.data()),f.data()){t(5,C=f.data());const g=G(Y,"users",n.uid);le(g,{friendUIDsWithNewMessages:_e(l)}),await et(),mt(a,300),r.scrollIntoView({block:"center",behavior:"smooth"})}})});async function k(){const f=G(Y,"chats",l);le(f,{messages:ge({content:m,timestamp:Date.now(),authorUID:n.uid})});const g=G(Y,"users",i);le(g,{friendUIDsWithNewMessages:ge(n.uid)});const _=await Fe(g);switch(N){case"any time":break;case"now":console.log("sending text to ,",_.data().phoneNumber),u({content:`${n.name} wrote "${m}"`,toWho:_.data().phoneNumber})}t(4,m="")}function y(f){we[f?"unshift":"push"](()=>{r=f,t(3,r)})}function P(){m=this.value,t(4,m)}function R(f){we[f?"unshift":"push"](()=>{a=f,t(2,a)})}const c=f=>t(1,N=f);return o.$$set=f=>{"friendUID"in f&&t(8,i=f.friendUID),"chatRoomID"in f&&t(9,l=f.chatRoomID),"currentUser"in f&&t(0,n=f.currentUser)},o.$$.update=()=>{o.$$.dirty&2&&console.log("reply within =",N)},[n,N,a,r,m,C,E,k,i,l,y,P,R,c]}class gt extends qe{constructor(e){super();Le(this,e,_t,pt,ve,{friendUID:8,chatRoomID:9,currentUser:0})}}const de=tt(null);function Re(o,e,t){const i=o.slice();return i[39]=e[t],i}function Ve(o,e,t){const i=o.slice();return i[42]=e[t],i}function Me(o,e,t){const i=o.slice();return i[45]=e[t],i}function vt(o){let e,t,i,l,n,s,u,a,r,m,E,N,C,k,y,P,R,c=o[5].friends,f=[];for(let T=0;T<c.length;T+=1)f[T]=Ce(Me(o,c,T));let g=o[13]&&Pe(o),_=o[5].messageRequestNames instanceof Array&&We(o);return{c(){e=v("div"),t=v("h2"),i=O("People"),l=V();for(let T=0;T<f.length;T+=1)f[T].c();n=V(),s=v("button"),u=O("Add person"),a=V(),g&&g.c(),r=V(),m=v("h2"),E=O("Editable category"),N=O(`
        Coming soon...

        `),C=v("h2"),k=O("Outside Messages"),y=V(),_&&_.c(),this.h()},l(T){e=b(T,"DIV",{style:!0});var w=D(e);t=b(w,"H2",{class:!0});var W=D(t);i=S(W,"People"),W.forEach(d),l=M(w);for(let Q=0;Q<f.length;Q+=1)f[Q].l(w);n=M(w),s=b(w,"BUTTON",{style:!0});var A=D(s);u=S(A,"Add person"),A.forEach(d),a=M(w),g&&g.l(w),r=M(w),m=b(w,"H2",{class:!0,style:!0});var K=D(m);E=S(K,"Editable category"),K.forEach(d),N=S(w,`
        Coming soon...

        `),C=b(w,"H2",{class:!0,style:!0});var F=D(C);k=S(F,"Outside Messages"),F.forEach(d),y=M(w),_&&_.l(w),w.forEach(d),this.h()},h(){I(t,"class","message-group-title svelte-1637l9v"),h(s,"margin-top","20px"),I(m,"class","message-group-title svelte-1637l9v"),h(m,"margin-top","50px"),I(C,"class","message-group-title svelte-1637l9v"),h(C,"margin-top","50px"),h(e,"width","100px")},m(T,w){U(T,e,w),p(e,t),p(t,i),p(e,l);for(let W=0;W<f.length;W+=1)f[W].m(e,null);p(e,n),p(e,s),p(s,u),p(e,a),g&&g.m(e,null),p(e,r),p(e,m),p(m,E),p(e,N),p(e,C),p(C,k),p(e,y),_&&_.m(e,null),P||(R=H(s,"click",o[27]),P=!0)},p(T,w){if(w[0]&4144){c=T[5].friends;let W;for(W=0;W<c.length;W+=1){const A=Me(T,c,W);f[W]?f[W].p(A,w):(f[W]=Ce(A),f[W].c(),f[W].m(e,n))}for(;W<f.length;W+=1)f[W].d(1);f.length=c.length}T[13]?g?g.p(T,w):(g=Pe(T),g.c(),g.m(e,r)):g&&(g.d(1),g=null),T[5].messageRequestNames instanceof Array?_?_.p(T,w):(_=We(T),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},d(T){T&&d(e),oe(f,T),g&&g.d(),_&&_.d(),P=!1,R()}}}function bt(o){let e;function t(n,s){return n[8]?yt:kt}let i=t(o),l=i(o);return{c(){l.c(),e=J()},l(n){l.l(n),e=J()},m(n,s){l.m(n,s),U(n,e,s)},p(n,s){i===(i=t(n))&&l?l.p(n,s):(l.d(1),l=i(n),l&&(l.c(),l.m(e.parentNode,e)))},d(n){l.d(n),n&&d(e)}}}function Ce(o){let e,t,i=o[45].name+"",l,n,s;function u(){return o[26](o[45])}return{c(){e=v("div"),t=v("span"),l=O(i),this.h()},l(a){e=b(a,"DIV",{style:!0,class:!0});var r=D(e);t=b(r,"SPAN",{style:!0,class:!0});var m=D(t);l=S(m,i),m.forEach(d),r.forEach(d),this.h()},h(){h(t,"margin-left","5px"),I(t,"class","svelte-1637l9v"),h(e,"border","solid orange"),h(e,"height","40px"),h(e,"display","flex"),h(e,"align-items","center"),I(e,"class","svelte-1637l9v"),te(e,"highlighted-box",o[45].uid===o[4]),te(e,"highlighted-blue",o[12].includes(o[45].uid))},m(a,r){U(a,e,r),p(e,t),p(t,l),n||(s=H(e,"click",u),n=!0)},p(a,r){o=a,r[0]&32&&i!==(i=o[45].name+"")&&$(l,i),r[0]&48&&te(e,"highlighted-box",o[45].uid===o[4]),r[0]&4128&&te(e,"highlighted-blue",o[12].includes(o[45].uid))},d(a){a&&d(e),n=!1,s()}}}function Pe(o){let e,t,i,l,n=o[16],s=[];for(let u=0;u<n.length;u+=1)s[u]=Se(Ve(o,n,u));return{c(){e=v("div"),t=O("Here are all accounts:"),i=V();for(let u=0;u<s.length;u+=1)s[u].c();l=J()},l(u){e=b(u,"DIV",{});var a=D(e);t=S(a,"Here are all accounts:"),a.forEach(d),i=M(u);for(let r=0;r<s.length;r+=1)s[r].l(u);l=J()},m(u,a){U(u,e,a),p(e,t),U(u,i,a);for(let r=0;r<s.length;r+=1)s[r].m(u,a);U(u,l,a)},p(u,a){if(a[0]&196640){n=u[16];let r;for(r=0;r<n.length;r+=1){const m=Ve(u,n,r);s[r]?s[r].p(m,a):(s[r]=Se(m),s[r].c(),s[r].m(l.parentNode,l))}for(;r<s.length;r+=1)s[r].d(1);s.length=n.length}},d(u){u&&d(e),u&&d(i),oe(s,u),u&&d(l)}}}function Oe(o){let e,t,i=o[42].name+"",l,n,s,u;function a(){return o[28](o[42])}return{c(){e=v("div"),t=v("button"),l=O(i),n=V(),this.h()},l(r){e=b(r,"DIV",{style:!0});var m=D(e);t=b(m,"BUTTON",{style:!0});var E=D(t);l=S(E,i),E.forEach(d),n=M(m),m.forEach(d),this.h()},h(){h(t,"margin-left","20px"),h(e,"margin-top","10px")},m(r,m){U(r,e,m),p(e,t),p(t,l),p(e,n),s||(u=H(t,"click",a),s=!0)},p(r,m){o=r},d(r){r&&d(e),s=!1,u()}}}function Se(o){let e,t=o[42].uid!==o[5].uid&&Oe(o);return{c(){t&&t.c(),e=J()},l(i){t&&t.l(i),e=J()},m(i,l){t&&t.m(i,l),U(i,e,l)},p(i,l){i[42].uid!==i[5].uid?t?t.p(i,l):(t=Oe(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(i){t&&t.d(i),i&&d(e)}}}function We(o){let e,t=o[5].messageRequestNames,i=[];for(let l=0;l<t.length;l+=1)i[l]=Ae(Re(o,t,l));return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=J()},l(l){for(let n=0;n<i.length;n+=1)i[n].l(l);e=J()},m(l,n){for(let s=0;s<i.length;s+=1)i[s].m(l,n);U(l,e,n)},p(l,n){if(n[0]&524320){t=l[5].messageRequestNames;let s;for(s=0;s<t.length;s+=1){const u=Re(l,t,s);i[s]?i[s].p(u,n):(i[s]=Ae(u),i[s].c(),i[s].m(e.parentNode,e))}for(;s<i.length;s+=1)i[s].d(1);i.length=t.length}},d(l){oe(i,l),l&&d(e)}}}function Ae(o){let e,t=o[39]+"",i,l,n,s;function u(){return o[29](o[39])}return{c(){e=v("div"),i=O(t),l=V(),this.h()},l(a){e=b(a,"DIV",{style:!0});var r=D(e);i=S(r,t),l=M(r),r.forEach(d),this.h()},h(){h(e,"border","solid blue"),h(e,"height","40px"),h(e,"display","flex"),h(e,"align-items","center")},m(a,r){U(a,e,r),p(e,i),p(e,l),n||(s=H(e,"click",u),n=!0)},p(a,r){o=a,r[0]&32&&t!==(t=o[39]+"")&&$(i,t)},d(a){a&&d(e),n=!1,s()}}}function yt(o){let e,t,i,l,n,s,u;return{c(){e=v("div"),t=v("input"),i=V(),l=v("button"),n=O("Confirm code"),this.h()},l(a){e=b(a,"DIV",{style:!0});var r=D(e);t=b(r,"INPUT",{label:!0,placeholder:!0}),i=M(r),l=b(r,"BUTTON",{});var m=D(l);n=S(m,"Confirm code"),m.forEach(d),r.forEach(d),this.h()},h(){I(t,"label","6-digit code"),I(t,"placeholder","123456"),h(e,"display","flex")},m(a,r){U(a,e,r),p(e,t),j(t,o[9]),p(e,i),p(e,l),p(l,n),s||(u=[H(t,"input",o[25]),H(l,"click",o[15])],s=!0)},p(a,r){r[0]&512&&t.value!==a[9]&&j(t,a[9])},d(a){a&&d(e),s=!1,me(u)}}}function kt(o){let e,t,i,l,n,s,u,a,r,m,E,N,C,k,y,P,R,c,f,g,_,T,w,W,A,K,F,Q,ie,re;return{c(){e=v("div"),t=v("b"),i=O("What problem does this solve:"),l=O(`
          Everytime someone messages us, we get a notification IMMEDIATELY, regardless of whether the message is time-sensitive, or even important. 
          Even if you try to ignore it, visually they go to the top of our chat list; 
          if you visited Messenger for a specific purpose, the top message distractions will help you forget what you were doing.
          Multiply that by all the people you message across time, and it's a disaster.

          `),n=v("br"),s=v("br"),u=V(),a=v("b"),r=O("How this app differs"),m=V(),E=v("ol"),N=v("li"),C=O(`Messages have no notifications by default unless the other person specifies it's time-sensitive e.g. "Before today" / "This week"`),k=V(),y=v("li"),P=O("Left-side is organized intentionally - NOT by whoever messaged you most recently"),R=V(),c=v("div"),f=v("input"),g=V(),_=v("input"),T=V(),w=v("input"),W=V(),A=v("input"),K=V(),F=v("div"),Q=O("Sign Up"),this.h()},l(L){e=b(L,"DIV",{style:!0});var q=D(e);t=b(q,"B",{});var ae=D(t);i=S(ae,"What problem does this solve:"),ae.forEach(d),l=S(q,`
          Everytime someone messages us, we get a notification IMMEDIATELY, regardless of whether the message is time-sensitive, or even important. 
          Even if you try to ignore it, visually they go to the top of our chat list; 
          if you visited Messenger for a specific purpose, the top message distractions will help you forget what you were doing.
          Multiply that by all the people you message across time, and it's a disaster.

          `),n=b(q,"BR",{}),s=b(q,"BR",{}),u=M(q),a=b(q,"B",{});var ue=D(a);r=S(ue,"How this app differs"),ue.forEach(d),m=M(q),E=b(q,"OL",{});var ee=D(E);N=b(ee,"LI",{});var fe=D(N);C=S(fe,`Messages have no notifications by default unless the other person specifies it's time-sensitive e.g. "Before today" / "This week"`),fe.forEach(d),k=M(ee),y=b(ee,"LI",{});var ce=D(y);P=S(ce,"Left-side is organized intentionally - NOT by whoever messaged you most recently"),ce.forEach(d),ee.forEach(d),q.forEach(d),R=M(L),c=b(L,"DIV",{style:!0});var z=D(c);f=b(z,"INPUT",{type:!0,id:!0,minlength:!0,maxlength:!0,placeholder:!0,style:!0}),g=M(z),_=b(z,"INPUT",{type:!0,id:!0,minlength:!0,maxlength:!0,placeholder:!0,style:!0}),T=M(z),w=b(z,"INPUT",{type:!0,id:!0,minlength:!0,maxlength:!0,placeholder:!0,style:!0}),W=M(z),A=b(z,"INPUT",{type:!0,id:!0,minlength:!0,maxlength:!0,placeholder:!0,style:!0}),K=M(z),F=b(z,"DIV",{id:!0,style:!0});var B=D(F);Q=S(B,"Sign Up"),B.forEach(d),z.forEach(d),this.h()},h(){h(e,"font-family","Roboto, sans-serif"),h(e,"font-size","1.5rem"),h(e,"color","grey"),h(e,"margin-top","20px"),I(f,"type","tel"),I(f,"id","phone-input-1"),I(f,"minlength","2"),I(f,"maxlength","4"),I(f,"placeholder","+1"),h(f,"width","36px"),h(f,"height","40px"),h(f,"font-size","2rem"),h(f,"margin-right","10px"),I(_,"type","tel"),I(_,"id","phone-input-1"),I(_,"minlength","3"),I(_,"maxlength","3"),I(_,"placeholder","339"),h(_,"width","54px"),h(_,"height","40px"),h(_,"font-size","2rem"),h(_,"margin-right","10px"),I(w,"type","tel"),I(w,"id","phone-input-2"),I(w,"minlength","3"),I(w,"maxlength","3"),I(w,"placeholder","676"),h(w,"width","54px"),h(w,"height","40px"),h(w,"font-size","2rem"),h(w,"margin-right","10px"),I(A,"type","tel"),I(A,"id","phone-input-3"),I(A,"minlength","4"),I(A,"maxlength","4"),I(A,"placeholder","1234"),h(A,"width","76px"),h(A,"height","40px"),h(A,"font-size","2rem"),h(A,"margin-right","10px"),I(F,"id","sign-in-button"),h(F,"border","solid"),h(F,"padding","6px"),h(c,"display","flex"),h(c,"justify-content","center"),h(c,"align-items","center"),h(c,"width","400px"),h(c,"margin-top","25px")},m(L,q){U(L,e,q),p(e,t),p(t,i),p(e,l),p(e,n),p(e,s),p(e,u),p(e,a),p(a,r),p(e,m),p(e,E),p(E,N),p(N,C),p(E,k),p(E,y),p(y,P),U(L,R,q),U(L,c,q),p(c,f),j(f,o[7]),p(c,g),p(c,_),j(_,o[0]),p(c,T),p(c,w),j(w,o[1]),p(c,W),p(c,A),j(A,o[2]),p(c,K),p(c,F),p(F,Q),ie||(re=[H(f,"input",o[21]),H(_,"input",o[22]),H(w,"input",o[23]),H(A,"input",o[24]),H(F,"click",o[14])],ie=!0)},p(L,q){q[0]&128&&j(f,L[7]),q[0]&1&&j(_,L[0]),q[0]&2&&j(w,L[1]),q[0]&4&&j(A,L[2])},d(L){L&&d(e),L&&d(R),L&&d(c),ie=!1,me(re)}}}function wt(o){let e,t,i,l,n,s,u,a,r,m,E,N,C,k=o[5].uid+"",y,P,R;return{c(){e=v("div"),t=O("Click any chat on the left-side"),i=V(),l=v("input"),n=V(),s=v("button"),u=O("Update name"),a=V(),r=v("div"),m=O("Give this link to your friends & family so they can message you without a zen-message account:"),E=V(),N=v("div"),C=O("zen-message.com/"),y=O(k),this.h()},l(c){e=b(c,"DIV",{style:!0});var f=D(e);t=S(f,"Click any chat on the left-side"),f.forEach(d),i=M(c),l=b(c,"INPUT",{placeholder:!0}),n=M(c),s=b(c,"BUTTON",{});var g=D(s);u=S(g,"Update name"),g.forEach(d),a=M(c),r=b(c,"DIV",{style:!0});var _=D(r);m=S(_,"Give this link to your friends & family so they can message you without a zen-message account:"),_.forEach(d),E=M(c),N=b(c,"DIV",{style:!0});var T=D(N);C=S(T,"zen-message.com/"),y=S(T,k),T.forEach(d),this.h()},h(){h(e,"margin-top","5px"),h(e,"margin-bottom","12px"),I(l,"placeholder","John Apple"),h(r,"margin-top","10px"),h(N,"font-size","0.8rem"),h(N,"color","blue")},m(c,f){U(c,e,f),p(e,t),U(c,i,f),U(c,l,f),j(l,o[6]),U(c,n,f),U(c,s,f),p(s,u),U(c,a,f),U(c,r,f),p(r,m),U(c,E,f),U(c,N,f),p(N,C),p(N,y),P||(R=[H(l,"input",o[31]),H(s,"click",o[18])],P=!0)},p(c,f){f[0]&64&&l.value!==c[6]&&j(l,c[6]),f[0]&32&&k!==(k=c[5].uid+"")&&$(y,k)},i:x,o:x,d(c){c&&d(e),c&&d(i),c&&d(l),c&&d(n),c&&d(s),c&&d(a),c&&d(r),c&&d(E),c&&d(N),P=!1,me(R)}}}function It(o){let e,t,i,l,n,s,u;return{c(){e=v("div"),t=O(o[10]),i=V(),l=v("button"),n=O("Resolve and delete")},l(a){e=b(a,"DIV",{});var r=D(e);t=S(r,o[10]),r.forEach(d),i=M(a),l=b(a,"BUTTON",{});var m=D(l);n=S(m,"Resolve and delete"),m.forEach(d)},m(a,r){U(a,e,r),p(e,t),U(a,i,r),U(a,l,r),p(l,n),s||(u=H(l,"click",o[30]),s=!0)},p(a,r){r[0]&1024&&$(t,a[10])},i:x,o:x,d(a){a&&d(e),a&&d(i),a&&d(l),s=!1,u()}}}function Dt(o){let e=o[4],t,i,l=Be(o);return{c(){l.c(),t=J()},l(n){l.l(n),t=J()},m(n,s){l.m(n,s),U(n,t,s),i=!0},p(n,s){s[0]&16&&ve(e,e=n[4])?(Ye(),se(l,1,1,x),je(),l=Be(n),l.c(),ne(l),l.m(t.parentNode,t)):l.p(n,s)},i(n){i||(ne(l),i=!0)},o(n){se(l),i=!1},d(n){n&&d(t),l.d(n)}}}function Be(o){let e,t;return e=new gt({props:{chatRoomID:o[3],friendUID:o[4],otherPersonUID:o[4],currentUser:o[5]}}),{c(){at(e.$$.fragment)},l(i){ut(e.$$.fragment,i)},m(i,l){ft(e,i,l),t=!0},p(i,l){const n={};l[0]&8&&(n.chatRoomID=i[3]),l[0]&16&&(n.friendUID=i[4]),l[0]&16&&(n.otherPersonUID=i[4]),l[0]&32&&(n.currentUser=i[5]),e.$set(n)},i(i){t||(ne(e.$$.fragment,i),t=!0)},o(i){se(e.$$.fragment,i),t=!1},d(i){ct(e,i)}}}function Et(o){let e,t,i,l,n,s,u;function a(k,y){return k[5]?vt:bt}let r=a(o),m=r(o);const E=[Dt,It,wt],N=[];function C(k,y){return k[4]&&k[5]&&k[3]?0:k[11]?1:k[5]?2:-1}return~(n=C(o))&&(s=N[n]=E[n](o)),{c(){e=v("div"),t=v("div"),m.c(),i=V(),l=v("div"),s&&s.c(),this.h()},l(k){e=b(k,"DIV",{style:!0});var y=D(e);t=b(y,"DIV",{});var P=D(t);m.l(P),P.forEach(d),i=M(y),l=b(y,"DIV",{style:!0});var R=D(l);s&&s.l(R),R.forEach(d),y.forEach(d),this.h()},h(){h(l,"width","320px"),h(l,"margin-left","5px"),h(l,"margin-top","5px"),h(e,"display","flex"),h(e,"padding-left","0px"),h(e,"padding-right","0px")},m(k,y){U(k,e,y),p(e,t),m.m(t,null),p(e,i),p(e,l),~n&&N[n].m(l,null),u=!0},p(k,y){r===(r=a(k))&&m?m.p(k,y):(m.d(1),m=r(k),m&&(m.c(),m.m(t,null)));let P=n;n=C(k),n===P?~n&&N[n].p(k,y):(s&&(Ye(),se(N[P],1,1,()=>{N[P]=null}),je()),~n?(s=N[n],s?s.p(k,y):(s=N[n]=E[n](k),s.c()),ne(s,1),s.m(l,null)):s=null)},i(k){u||(ne(s),u=!0)},o(k){se(s),u=!1},d(k){k&&d(e),m.d(),~n&&N[n].d()}}}function Nt(o,e,t){let i;lt(o,de,z=>t(5,i=z));let l="",n,s="+1",u="",a="",r="",m,E="",N="",C="",k="",y=[];function P(){console.log("signInWithPhone()"),window.recaptchaVerifier||(window.recaptchaVerifier=new ot("sign-in-button",{size:"invisible",callback:B=>{console.log("reCAPTCHA solved =",B)}},he()),n=window.recaptchaVerifier),z();function z(){const B=`${s} ${u}-${a}-${r}`;print(he(),B,n),rt(he(),B,n).then(Z=>{console.log("confirmation result =",Z),t(8,m=Z),window.confirmationResult=Z}).catch(Z=>{alert(Z),console.log("error =",Z),window.recaptchaVerifier.render().then(function(X){grecaptcha.reset(X)})})}}function R(){console.log("phoneConfirmCode =",E),window.confirmationResult.confirm(E).then(z=>{}).catch(z=>{alert(z)})}const c=he();let f="",g=[],_=!1;const T=it(Y,"users");st(T).then(z=>{z.docs.forEach(B=>{g.push(ke({uid:B.id},B.data()))})});async function w({name:z,uid:B}){for(const Ze of i.friends)if(Ze.uid===B){alert("You're already friends"),t(13,_=!1);return}const Z=G(Y,"users",i.uid);await le(Z,{friends:ge({name:z,uid:B})});const X=i.uid<B?i.uid+B:B+i.uid,Je=G(Y,"chats",X);await Ie(Je,{participantUIDs:[B,i.uid],messages:[]}),t(13,_=!1)}nt(c,async z=>{if(z){const B=G(Y,"users",z.uid),Z=await Fe(B);if(Z.exists())de.set(Z.data());else{const X={uid:z.uid,name:z.displayName||"John Apple",phoneNumber:z.phoneNumber,friends:[],family:[],VIPs:[],everyoneElse:[]};await Ie(G(Y,"users",z.uid),X),de.set(X)}He(G(Y,"users",z.uid),X=>{de.set(X.data()),i.friendUIDsWithNewMessages&&t(12,y=i.friendUIDsWithNewMessages)})}});async function W(){await le(G(Y,"users",i.uid),{name:l}),t(6,l=""),alert("successfully updated")}function A(z){t(4,f=""),t(11,k=z),t(10,C=i.messageRequestObjects.filter(B=>B.senderName===z)[0].content)}function K(z){const B=G(Y,"users",i.uid);le(B,{messageRequestObjects:_e({content:C,senderName:k}),messageRequestNames:_e(k)}),t(11,k=""),t(10,C="")}function F(){s=this.value,t(7,s)}function Q(){u=this.value,t(0,u)}function ie(){a=this.value,t(1,a)}function re(){r=this.value,t(2,r)}function L(){E=this.value,t(9,E)}const q=z=>t(4,f=z.uid),ae=()=>t(13,_=!_),ue=z=>w(z),ee=z=>A(z),fe=()=>K();function ce(){l=this.value,t(6,l)}return o.$$.update=()=>{o.$$.dirty[0]&56&&f&&(t(3,N=i.uid<f?i.uid+f:f+i.uid),console.log("chatRoomID =",N)),o.$$.dirty[0]&1&&u.length===3&&document.getElementById("phone-input-2").focus(),o.$$.dirty[0]&2&&a.length===3&&document.getElementById("phone-input-3").focus(),o.$$.dirty[0]&4&&r.length===4&&P()},[u,a,r,N,f,i,l,s,m,E,C,k,y,_,P,R,g,w,W,A,K,F,Q,ie,re,L,q,ae,ue,ee,fe,ce]}class Rt extends qe{constructor(e){super();Le(this,e,Nt,Et,ve,{},null,[-1,-1])}}export{Rt as default};
